<!doctype html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--><!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if IE 8]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><title>Backing up ESXi 5.5 host configurations with vCenter Orchestrator (vCO) &amp;ndash; Workflow design walkthrough &#183; DefinIT</title><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content="Backup,configuration,ESX and ESXi,esxi,orchestrator,Security,workflow,"><meta property="og:title" content="Backing up ESXi 5.5 host configurations with vCenter Orchestrator (vCO) &amp;ndash; Workflow design walkthrough  &#183; DefinIT"><meta property="og:site_name" content="DefinIT"><meta property="og:url" content="https://www.definit.co.uk/2014/03/backing-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough/"><meta property="og:locale" content="en-gb"><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:article:published_time" content="2014-03-13T16:27:19Z"><meta property="og:article:modified_time" content="2014-03-13T16:27:19Z"><meta property="og:article:tag" content="Backup"><meta property="og:article:tag" content="configuration"><meta property="og:article:tag" content="ESX and ESXi"><meta property="og:article:tag" content="esxi"><meta property="og:article:tag" content="orchestrator"><meta property="og:article:tag" content="Security"><meta property="og:article:tag" content="workflow"><meta name=twitter:card content="summary"><meta name=twitter:site content="@sammcgeown"><meta name=twitter:creator content="@sammcgeown"><meta name=twitter:title content="Backing up ESXi 5.5 host configurations with vCenter Orchestrator (vCO) &amp;ndash; Workflow design walkthrough"><meta name=twitter:description content><meta name=twitter:url content="https://www.definit.co.uk/2014/03/backing-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough/"><meta name=twitter:domain content="https://www.definit.co.uk"><link rel=canonical href=https://www.definit.co.uk/2014/03/backing-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough/><link rel=apple-touch-icon-precomposed sizes=144x144 href=/touch-icon-144-precomposed.png><link rel=icon href=/images/favicon-16x16.png><meta name=generator content="Hugo 0.79.0"><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js></script><script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><script src=/js/clr-1.0/clr-icons.min.js></script><script src=/js/clr-1.0/custom-elements.min.js></script><link href=/css/clr-1.0/clr-ui-dark.css rel=stylesheet><link href=/css/clr-1.0/clr-icons.min.css rel=stylesheet><link href=/css/definit-clarity.css rel=stylesheet><link href=/css/lightbox.min.css rel=stylesheet></head><body data-ng-app=myapp data-ng-controller=MyController data-ng-mouseleave=MouseLeave($event)><div class=main-container><header class=header-6><div class=branding><a class=navbar-brand-img href=/><img alt src=/images/logos/definit-logo.png>
<span class=title>DefinIT</span></a></div><nav class=header-nav><a class="nav-link nav-text" href=https://www.definit.co.uk/>Home</a>
<a class="nav-link nav-text" href=https://www.definit.co.uk/about/>About</a>
<a class="nav-link nav-text" href=https://www.github.com/sammcgeown>GitHub</a>
<a class="nav-link nav-text" href=https://www.definit.co.uk/index.xml>RSS</a></nav><div class=header-actions><form class=search id=search method=get action=//google.com/search><label for=search_input><input id=search_input type=text name=q placeholder="Search with Google">
<input type=hidden name=as_sitesearch value=https://www.definit.co.uk></label></form></div></header><nav class=subnav><ul class=nav><li class=nav-item><a class=nav-link href=https://www.definit.co.uk/>Home</a></li><li class=nav-item><a class=nav-link href=https://www.definit.co.uk/about/>About</a></li><li class=nav-item><a class=nav-link href=https://www.github.com/sammcgeown>GitHub</a></li><li class=nav-item><a class=nav-link href=https://www.definit.co.uk/index.xml>RSS</a></li></ul></nav><div class=content-container><div class=content-area><h1>BACKING UP ESXI 5.5 HOST CONFIGURATIONS WITH VCENTER ORCHESTRATOR (VCO) &amp;NDASH; WORKFLOW DESIGN WALKTHROUGH</h1><div class=metas><span class=clr-card-authors><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 13/3/2014
&#183; Read in about 11 min (2246 words)</div><div class=clr-card-authors>Published under <a href=/category/vmware>VMware</a> and <a href=/category/vrealize-orchestrator>vRealize Orchestrator</a></div><div class=clr-card-authors>Tags:
<a class=clr-tags href=https://www.definit.co.uk/tag/backup>#Backup</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/configuration>#configuration</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/esx-and-esxi>#ESX and ESXi</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/esxi>#esxi</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/orchestrator>#orchestrator</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/security>#Security</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/workflow>#workflow</a></div></span></div><br clear=all><p><img class="alignright size-full wp-image-4264" alt="vCenter Orchestrator (vCO)" src=/images/2014/03/20140313-043.png width=142 height=152>As a little learning project, I thought I’d take on <a href=http://vexpert.me/kd>Simon’s previous post</a> about backing up ESXi configurations and extend it to vCenter Orchestrator (vCO), and document how I go about building up a workflow. I&rsquo;m learning more and more about vCO all the time, but I found it has a really steep entry point, and finding use cases is hard if you haven&rsquo;t explored capabilities.</p><p>The steps I want to create in this post are:</p><ol><li>Right click host to trigger</li><li>Sync and then back up the configuration to file</li><li>Copy the file to a datastore, creating a folder based on date and the host</li></ol><p>Ideas for future extensions of this workflow include - trigger from cluster/datastore/host folder, email notifications, emailing the backup files and backup config before triggering a VMware Update Manager remediation. Hopefully all this will come in future posts - for now, lets get stuck into the creation of this workflow.</p><p>Open your vCO administration web page, log in as “vmware” and the password you specified during deployment. Next move to the SSH plug-in configuration page and add your ESXi hosts.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb81.png alt></p><p>Open the vCenter Orchestrator Client, switch to the Design view and create a new folder to contain your workflows – mine is called “DefinIT”. Right click and create a new workflow, then name the workflow “DefinIT-Backup-ESXi-Config”. It will now open the workflow in edit mode.</p><p>Select the Schema tab and search for the SSH workflows. The one we are looking for is “Run SSH Command”. Drag that onto the workflow, between the start and end discs.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb82.png alt></p><p>Click “Setup” on the grey question bar at the top of the screen to add the parameters to the workflow. This means that we can provide the required details from our workflow to the “Run SSH Command” workflow.</p><p>The two we want to specify a value for are “cmd” and “passwordAuthentication” – select value and then click the link to enter the values:</p><table width=550 border=1 cellspacing=5 cellpadding=2><tr><td valign=top width=172>cmd</td><pre><code>&lt;td valign=&quot;top&quot; width=&quot;378&quot;&gt;
  vim-cmd hostsvc/firmware/sync_config&lt;br /&gt; vim-cmd hostsvc/firmware/backup_config
&lt;/td&gt;
</code></pre></tr><tr><td valign=top width=172>passwordAuthentication</td><pre><code>&lt;td valign=&quot;top&quot; width=&quot;378&quot;&gt;
  Yes
&lt;/td&gt;
</code></pre></tr></table><p>The “cmd” value is taken from <a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2042141" target=_blank>Backing up and restoring ESXi configuration using the vSphere Command-Line Interface and vSphere PowerCLI (2042141)</a> – it ensures that any configuration changes are written to file and then backs that configuration up to a location on the installation disk (/scratch/download/<guid>/configBundle-<hostfqdn>.tgz).</p><p>The passwordAuthentication parameter just specifies that we should use password based authentication for the SSH connection. We could use certificates, but that’s another day.</p><p>Set “path” and “passphrase” to Skip – this will skip adding the parameters to our Workflow (though they still exist as local parameters in the Run SSH Command workflow).</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb83.png alt></p><p>OK, so far so good, we’ve specified a default value for the cmd and passwordAuthentication parameters, skipped the path and passphrase and left the others as is. Click “Promote” and then select the “General” tab. You’ll see that the two parameters we specified have been created as attributes (bottom pane). Select the “Inputs” tab and you’ll see that the three “Run SSH Command” workflow parameters that we left as “Input” have been created as inputs for our workflow.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb84.png alt></p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb85.png alt></p><p>Jump back to the “Schema” tab and click on the “Validate” button – it should validate successfully. Now lets run our workflow – hit run and you’ll be presented with the three input parameters for our workflow – fill in the details of a test ESXi host, an admin user name and password and click submit.</p><p>All being well the workflow will run and finish successfully. Have a look at the variables and the values the workflow has assigned them, they should look familiar! Jump to the Logs tab to see the output of the workflow.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb86.png alt> <img src=https://www.definit.co.uk/images/2014/03/image_thumb87.png alt></p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb88.png alt></p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb89.png alt></p><p>Finally, double click on the “Run SSH Command” task and rename it to “Backup ESXi Config”.</p><p>So, step two from my original list is completed – tick! Step three is more complicated – we need to copy the file generated to a datastore so it’s backed up safely (the backup command only keeps the file for a few minutes). This is a little more complicated because we need to take the output of the first SSH command, manipulate it and copy the file to a datastore. We also need a new input – the target datastore.</p><p>The first step is to manipulate the output of the previous task – to do this we need a little scripting. As you can see from the “Variables” tab above, the value we want is part of a variable called “outputText”, which is a string.</p><p>Switch to the “Schema” view, find the “Scriptable Task” and drag it onto your workflow, between the Run SSH Command and the end block.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb90.png alt></p><p>Select the scriptable task and click the little pencil to edit it. Rename the task to something appropriate – “Modify File Path”. Select the “IN” tab – notice there are no inputs for this task by default. Click the little “Bind to workflow parameter/attribute” button – this will show you our workflow’s parameters and attributes that are currently available. Click “Create parameter/attribute in workflow” and then name it “SSHOutputText”, enter a description “Text output from SSH workflow”, select the type “string” and ensure that we are creating an ATTRIBUTE with the same name, not an INPUT PARAMETER. Click OK to create.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb91.png alt></p><p>Close the Script task for now.</p><p>The other requirement was for the user to select a Datastore on which to store the backup files. Given that we want a user input for this, we should make it an INPUT for our workflow. Switch to the INPUTS tab and click on the “Add parameter” button. The new parameter is called “arg_in_0” – click on the name to change it and call it “TargetDatastore”. Now, we could leave this as a string input for the user to enter each time, but that is prone to human error, and there’s a better way. Click on the “string” text to open up the type chooser, then find the type called VC:Datastore – use the search filter for speed! Accept that. Enter a description for the new parameter “Datastore to Export Host Configs”.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb92.png alt></p><p>OK, so now we have a datastore (for which the user will be prompted at run-time) and an attribute to contain the output of our SSH backup command – lets start tying some parts together.</p><p>Edit the “Backup ESXi Config” task (select and use Ctrl-E, or click the pencil) and then select the “Visual Binding” tab. We can now pipe the value of “outputText” into the Attribute “SSHOutputText” by dragging the first over to the second to link them.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb93.png alt></p><p>Now when the “Backup ESXi Config” task completes the value of outputText will be assigned to SSHOutputText, which is available in our workflow. Close “Backup ESXi Config”.</p><p>Edit the “Modify File Path” scriptable task and go to the “IN” tab. Click the link button again and select the TargetDatastore parameter to bind as an input. In the same way, add the hostNameOrIP parameter as an input.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb94.png alt></p><p>Switch to the “OUT” tab and add the “cmd” attribute – this will contain the command we generate in the script.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb95.png alt></p><p>Switch to the Visual Binding tab and view how the inputs/outputs are bound to parameters and attributes. Inside “Modify File Path” we will have an attribute “SSHOutputText” (which was previously bound to the outputText of the Backup ESXi Config” task) and a parameter (which contains the Datastore object selected by the user). We also have the OUT attribute “cmd”, which will bind to the workflow attribute “cmd”.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb96.png alt></p><p>Now for a little JavaScript. Bear with me, I’ve not used JavaScript in years! Select the Scripting tab and you will see our parameters and attributes are handily listed at the top – they can be clicked to enter them into the script field.</p><p>This looks a bit complex, but essentially we’re just building a couple of Linux commands – a mkdir to create a directory and a “cp” to copy the file.</p><p>Firstly, create a new string “fp” to hold the file path. Using string.replace() we can strip out the text “Bundle can be downloaded at : http://*" from the SSHOutputText value, and then remove any line breaks. We then get the current date and build a string (df) in the format of “YYYY-MM-DD” to create a directory for each backup.</p><p>Finally, we build the command to create a directory structure in the chosen Datastore: <strong><em>/vmfs/volumes/<datastorename>/ConfigBackups/<hostnameorip>/YYYY-MM-DD/</em></strong> and then copy the file from it’s location in <strong><em>/scratch/downloads/<guid>/configBundle-<hostfqdn>.tgz</em></strong> to the newly created directory. This command string is then placed in the out attribute “cmd” and written to the System.log.</p><blockquote><p>var fp = new String();</p></blockquote><blockquote><p>fp = (SSHOutputText.replace(&ldquo;Bundle can be downloaded at : [http://*&rdquo;,"")).replace(/(\r\n|\n|\r)/gm,"");][18]</p></blockquote><blockquote><p>d = new Date();</p></blockquote><blockquote><p>df = d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();</p></blockquote><blockquote><p>cmd = &ldquo;mkdir -p /vmfs/volumes/&rdquo; + TargetDatastore.Name + &ldquo;/ConfigBackups/&rdquo; + hostNameOrIP + &ldquo;/&rdquo; + df + &ldquo;; cp -f /scratch&rdquo; + fp + " /vmfs/volumes/" + TargetDatastore.Name + &ldquo;/ConfigBackups/&rdquo;  + hostNameOrIP + &ldquo;/&rdquo; + df + &ldquo;/&rdquo;</p><p>System.log(cmd)</p></blockquote><p>Now switch to Schema view and validate the workflow – this will throw an error this time because we mapped the “outputText” parameter to the “SSHOutputText” attribute, leaving the parameter unused. Click “Delete parameter”.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb97.png alt></p><p>Lets run the workflow and  see what we get. Notice this time we have the Datastore selection, and we can actually pick that from our vCenter inventory.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb98.png alt></p><p>And, although nothing new happened, we have some new log output (thanks to our System.log command). Look at the command that was generated:</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb99.png alt></p><p>Perfect – we can move on to executing that command with another “Run SSH Command” task – so jump over to Schema view and drag it in after the “Modify File Path” script element. This time we don’t want to “promote” the SSH command task’s inputs as we already have parameters set for them. Edit the task and name it “Create folder and copy file”. Switch to the Visual Binding view to link up the inputs, and outputs to the attributes and parameters:</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb100.png alt></p><p>Here we reuse the hostName, username, password, passwordAuthentication from our first SSH command task and the cmd attribute which was re-used in the Script task and contains our new command. Output wise we re-use the SSHOutputText attribute to contain the outputText of the SSH task. The last two parameters (path and passphrase) need to be bound to a NULL value otherwise our validation will fail – this is done by going to the “IN” tab and setting the Source parameter to NULL</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb101.png alt></p><p>My workflow now looks like this:</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb102.png alt></p><p>Now run the workflow and check the Datastore specified for the folder structure and backup file</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb103.png alt></p><p>This is cool, but at the moment we are not right-clicking a host in the Web Client, we’re running it from a vCO client. Binding this workflow to hosts is actually really easy, but at the moment we’d still have to manually type the name of the host into the form to make it usable. It’d be better to populate it from the host we’re clicking right?</p><p>Go to the INPUTS tab and add a new parameter named “Host” and add a description “Host to back up”. Change the type from string to VC:HostSystem from the type picker:</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb104.png alt></p><p>Use the up arrow to move the new parameter to the top of the list. Select the hostNameOrIP parameter and click the “Move as attribute” button.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb105.png alt></p><p>Now we’ve properly broken the workflow – all the elements used the hostNameOrIP as an input parameter! 🙂 Switch to the Schema tab and drag a new Scriptable task before the first SSH task – name it “Set Host Name”. Edit the task and go to the Visual Binding tab. Drag the parameter “Host” to the “IN” field – this creates a task parameter of Host and binds the value of the workflow parameter host to it. Drag the Out Attributes “hostNameOrIP” attribute to the “OUT” field – this creates an out attribute for the task and binds it to the workflow attribute.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb106.png alt></p><p>Switch to the Scripting tab and enter one simple line to select the “name” property of the VC:HostSystem object and assign it to the hostNameOrIP attribute.</p><blockquote><p>hostNameOrIP = Host.name</p></blockquote><p>Close the scriptable task and move on to each of the workflow tasks (Backup ESXi Config, Modify File Path and Create Folder and Copy), opening the Visual Binding tabs and dragging the “hostNameOrIP” attribute to the tasks’ “hostNameOrIP” IN property:</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb107.png alt></p><p>My workflow now looks like this:</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb108.png alt></p><p>The workflow should now validate – but don’t run it yet. Log on to your vSphere Web Client and go to the vCenter Orchestrator inventory page. Select the top level vCO Home, then in the right hand pane click on Manage and select Context Actions and click the plus sign.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb109.png alt></p><p>Now find the workflow in the Available Workflows section and click Add. Then find “Host” in the Available types pane and ensure it’s checked. Click ok and then switch to your Hosts and Clusters view.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb110.png alt></p><p>Now select a host and right click (wait a few seconds for the context menu to build) and you will see the Orchestrator actions, and the workflow are available.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb111.png alt></p><p>The ESXi Host field is now pre-populated with the host we just clicked on – you can run the whole workflow again if you want, or cancel out and head back to the Orchestrator Client for the final task.</p><p><img src=https://www.definit.co.uk/images/2014/03/image_thumb112.png alt></p><p>[18]: http://*","")).replace(/(\r\n|\n|\r)/gm,"");
[19]: /images/2014/03/image98.png
[20]: /images/2014/03/image99.png
[21]: /images/2014/03/image100.png
[22]: /images/2014/03/image101.png
[23]: /images/2014/03/image102.png
[24]: /images/2014/03/image103.png
[25]: /images/2014/03/image104.png
[26]: /images/2014/03/image105.png
[27]: /images/2014/03/image106.png
[28]: /images/2014/03/image107.png
[29]: /images/2014/03/image108.png
[30]: /images/2014/03/image109.png
[31]: /images/2014/03/image110.png
[32]: /images/2014/03/image111.png
[33]: /images/2014/03/image112.png
[34]: /images/2014/03/image113.png</p><h6>Share this post</h6><span class=share-box><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" onclick="window.open(this.href,'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-facebook-official"></i></a><a href="https://twitter.com/intent/tweet?text=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough&url=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" onclick="window.open(this.href,'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-twitter"></i></a><a href="https://plus.google.com/share?url=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" onclick="window.open(this.href,'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-google-plus"></i></a><a href="http://www.reddit.com/submit?url=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" onclick="window.open(this.href,'mywin','left=20,top=20,width=900,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-reddit"></i></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f&title=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough" onclick="window.open(this.href,'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-linkedin"></i></a><a href="mailto:?subject=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough&body=Check out this site https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" data-proofer-ignore><i class="fa fa-envelope"></i></a></span><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough&url=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5.0-4.55 2.04-4.55 4.54.0.36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3.0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35.0 12.92-6.92 12.92-12.93.0-.2.0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.tumblr.com/widgets/share/tool?posttype=link&title=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough&caption=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough&content=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f&canonicalUrl=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f&shareSource=tumblr_share_button" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.5.5v5h5v4h-5V15c0 5 3.5 4.4 6 2.8v4.4c-6.7 3.2-12 0-12-4.2V9.5h-3V6.7c1-.3 2.2-.7 3-1.3.5-.5 1-1.2 1.4-2 .3-.7.6-1.7.7-3h3.8z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f&title=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough&summary=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough&source=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6.0 2.5 1 2.6 2.5.0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f&resubmit=true&title=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div></div></a><a class=resp-sharing-button__link href="mailto:?subject=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough&body=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" target=_self rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div></div></a><a class=resp-sharing-button__link href="whatsapp://send?text=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough%20https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://telegram.me/share/url?text=Backing%20up%20ESXi%205.5%20host%20configurations%20with%20vCenter%20Orchestrator%20%28vCO%29%20%26ndash%3b%20Workflow%20design%20walkthrough&url=https%3a%2f%2fwww.definit.co.uk%2f2014%2f03%2fbacking-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M.707 8.475C.275 8.64.0 9.508.0 9.508s.284.867.718 1.03l5.09 1.897 1.986 6.38a1.102 1.102.0 001.75.527l2.96-2.41a.405.405.0 01.494-.013l5.34 3.87a1.1 1.1.0 001.046.135 1.1 1.1.0 00.682-.803l3.91-18.795A1.102 1.102.0 0022.5.075L.706 8.475z"/></svg></div></div></a><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")
return;var dsq=document.createElement('script');dsq.async=true;dsq.type='text/javascript';dsq.src='//definit.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><div class="clarity-prev-next col-xs-12 col-sm-12 col-md-12 col-lg-12"><nav class=clarity-page-prev-next><div class=clr-nav-previous><a href=https://www.definit.co.uk/2014/03/what-about-vsan-for-smbsme/ title="What about VSAN for SMB/SME?" class="btn btn-sm btn-outline">Previous</a></div><div class=clr-nav-next><a href=https://www.definit.co.uk/2014/03/extending-a-vcenter-orchestrator-vco-workflow-with-foreach-backing-up-all-esxi-hosts-in-a-cluster/ title="Extending a vCenter Orchestrator (vCO) Workflow with ForEach &amp;ndash; Backing up all ESXi hosts in a Cluster" class="btn btn-sm btn-outline">Next</a></div></nav></div></div><div class=content-area></div><nav class="sidenav clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><section class=sidenav-content><section class="nav-group collapsible"><input id=Categories type=checkbox>
<label for=Categories>Categories</label><ul class=nav-list><li><a href=/category/automation class=nav-link>AUTOMATION <span class="badge badge-1">7</span></a></li><li><a href=/category/career class=nav-link>CAREER <span class="badge badge-1">21</span></a></li><li><a href=/category/certification class=nav-link>CERTIFICATION <span class="badge badge-1">2</span></a></li><li><a href=/category/cloud class=nav-link>CLOUD <span class="badge badge-1">8</span></a></li><li><a href=/category/cloud-native class=nav-link>CLOUD-NATIVE <span class="badge badge-1">13</span></a></li><li><a href=/category/community class=nav-link>COMMUNITY <span class="badge badge-1">41</span></a></li><li><a href=/category/development class=nav-link>DEVELOPMENT <span class="badge badge-1">3</span></a></li><li><a href=/category/log-insight class=nav-link>LOG-INSIGHT <span class="badge badge-1">2</span></a></li><li><a href=/category/microsoft class=nav-link>MICROSOFT <span class="badge badge-1">60</span></a></li><li><a href=/category/networking class=nav-link>NETWORKING <span class="badge badge-1">34</span></a></li><li><a href=/category/nsx class=nav-link>NSX <span class="badge badge-1">26</span></a></li><li><a href=/category/powercli class=nav-link>POWERCLI <span class="badge badge-1">4</span></a></li><li><a href=/category/storage class=nav-link>STORAGE <span class="badge badge-1">6</span></a></li><li><a href=/category/vcloud-director class=nav-link>VCLOUD-DIRECTOR <span class="badge badge-1">5</span></a></li><li><a href=/category/vmware class=nav-link>VMWARE <span class="badge badge-1">204</span></a></li><li><a href=/category/vmworld class=nav-link>VMWORLD <span class="badge badge-1">12</span></a></li><li><a href=/category/vrealize-automation class=nav-link>VREALIZE-AUTOMATION <span class="badge badge-1">41</span></a></li><li><a href=/category/vrealize-operations class=nav-link>VREALIZE-OPERATIONS <span class="badge badge-1">69</span></a></li><li><a href=/category/vrealize-orchestrator class=nav-link>VREALIZE-ORCHESTRATOR <span class="badge badge-1">27</span></a></li><li><a href=/category/vsan class=nav-link>VSAN <span class="badge badge-1">4</span></a></li><li><a href=/category/vsphere class=nav-link>VSPHERE <span class="badge badge-1">56</span></a></li><li><a href=/category/webinar class=nav-link>WEBINAR <span class="badge badge-1">17</span></a></li></ul></section><section class="nav-group collapsible"><input id=Tags type=checkbox>
<label for=Tags>Tags (Top 10)</label><ul class=nav-list><li><a href=/tag/vrops class=nav-link>VROPS <span class="badge badge-1">64</span></a></li><li><a href=/tag/vmware class=nav-link>VMWARE <span class="badge badge-1">51</span></a></li><li><a href=/tag/windows class=nav-link>WINDOWS <span class="badge badge-1">38</span></a></li><li><a href=/tag/automation class=nav-link>AUTOMATION <span class="badge badge-1">33</span></a></li><li><a href=/tag/esx-and-esxi class=nav-link>ESX-AND-ESXI <span class="badge badge-1">33</span></a></li><li><a href=/tag/vcenter-server class=nav-link>VCENTER-SERVER <span class="badge badge-1">33</span></a></li><li><a href=/tag/nsx class=nav-link>NSX <span class="badge badge-1">31</span></a></li><li><a href=/tag/vmworld class=nav-link>VMWORLD <span class="badge badge-1">30</span></a></li><li><a href=/tag/vra class=nav-link>VRA <span class="badge badge-1">26</span></a></li><li><a href=/tag/webinar class=nav-link>WEBINAR <span class="badge badge-1">26</span></a></li></section><section class=nav-group><label for=Sponsors>Sponsors</label><ul class=nav-list></ul></section></section></nav></div><script async src="https://www.googletagmanager.com/gtag/js?id=UA-4368767-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-4368767-1');</script><script src=/js/lightbox-plus-jquery.min.js></script></div></body></html>
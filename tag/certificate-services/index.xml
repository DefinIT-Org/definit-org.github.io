<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Certificate Services on DefinIT</title><link>https://www.definit.co.uk/tag/certificate-services/</link><description>Recent content in Certificate Services on DefinIT</description><generator>Hugo</generator><language>en-gb</language><lastBuildDate>Mon, 23 Jun 2014 11:43:30 +0000</lastBuildDate><atom:link href="https://www.definit.co.uk/tag/certificate-services/index.xml" rel="self" type="application/rss+xml"/><item><title>VCAC 6.0 build-out to distributed model &amp;ndash; Part 1: Certificates</title><link>https://www.definit.co.uk/2014/06/vcac-6-0-build-out-to-distributed-model-part-1-certificates/</link><pubDate>Mon, 23 Jun 2014 11:43:30 +0000</pubDate><guid>https://www.definit.co.uk/2014/06/vcac-6-0-build-out-to-distributed-model-part-1-certificates/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;This is the first article in a series about how to build-out a simple vCAC 6 installation to a distributed model.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;In a simple installation you have the Identity Appliance, the vCAC appliance (which includes a vPostgres DB and vCenter Orchestrator instance) and an IaaS server. The distributed model still has a single Identity Appliance but clusters 2 or more vCAC appliances behind a load balancer, backed by a separate vPostgres database appliance. The IaaS components are installed on 2 or more IaaS Windows servers and are load balanced, backed by an external MSSQL database. Additionally, the vCenter Orchestrator appliance is used in a failover cluster, backed by the external vPostgres database appliance.&lt;/p&gt;</description></item><item><title>vCenter 5.5 Certificate Toolkit for Distributed Environments</title><link>https://www.definit.co.uk/2014/06/vcenter-5-5-certificate-toolkit-for-distributed-environments/</link><pubDate>Mon, 09 Jun 2014 10:50:43 +0000</pubDate><guid>https://www.definit.co.uk/2014/06/vcenter-5-5-certificate-toolkit-for-distributed-environments/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;Derek Seaman’s excellent SSL toolkit&lt;!-- raw HTML omitted --&gt;. I know that there are hours and hours of work put into this script by Derek and I want to thank him for that – it’s a massive time saver. This modification is to fit a different set of circumstances – “standing on the shoulders of giants” – and should in no way be seen as me criticising or stealing Derek’s work.&lt;/p&gt;</description></item><item><title>Generating and Installing CA Signed Certificates for VMware SRM 5.5</title><link>https://www.definit.co.uk/2014/03/generating-and-installing-ca-signed-certificates-for-vmware-srm-5-5/</link><pubDate>Wed, 05 Mar 2014 10:11:10 +0000</pubDate><guid>https://www.definit.co.uk/2014/03/generating-and-installing-ca-signed-certificates-for-vmware-srm-5-5/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;I’m fairly new to SRM, but even so this one seemed like a real head-scratcher! If you happen to be using CA signed certificates on your “protected site” vCenter and “recovery site” vCenter servers, when you come to linking the two SRM sites you encounter SSLHandShake errors – basically SRM assumes you want to use certificates for authentication because you’re using signed certificates. If you use the default self-signed certificates, SRM will default to using password authentication (see &lt;!-- raw HTML omitted --&gt;SRM Authentication&lt;!-- raw HTML omitted --&gt;). Where the process fails is during the “configure connection” stage, if either one of your vCenter servers does not have CA signed and the other does (throws an error that they are using different authentication methods) or that you are using self-signed certificates for either SRM installation (throws an error that the certificate or CA could not be trusted).&lt;/p&gt;</description></item><item><title>Why secure your vSphere environment with valid SSL certificates?</title><link>https://www.definit.co.uk/2013/05/why-secure-your-vsphere-environment-with-valid-ssl-certificates/</link><pubDate>Tue, 14 May 2013 15:39:44 +0000</pubDate><guid>https://www.definit.co.uk/2013/05/why-secure-your-vsphere-environment-with-valid-ssl-certificates/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;It&amp;rsquo;s no secret that installing certificates from an internal CA is a pain in the…vCenter, but having just gone through the process of updating 3 vCenter installations with the 5-7 certificates required for each server I was asked &amp;ldquo;just why is it we need to do this again?&amp;rdquo;&lt;/p&gt;
&lt;h3 id="why-does-it-requiremultiple-certificates-for-my-vcenter-server"&gt;Why does it require multiple certificates for my vCenter server? &lt;a class="anchor" href="#why-does-it-requiremultiple-certificates-for-my-vcenter-server"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;In short, each service requires a certificate because it could feasibly be on a server (or servers) of it&amp;rsquo;s own - take this hypothetical design - each role is hosted on it&amp;rsquo;s own VM, and there are 7 certificates required - SSO, Inventory Service, vCenter Server, Orchestrator, Web Client, Log Browser and Update Manager. If you install all these services on one server you still have to create certificates for those individual services.&lt;/p&gt;</description></item><item><title>Powershell – Generate Microsoft CA signed SSL certificates with vSphere 5.1</title><link>https://www.definit.co.uk/2012/11/powershell-generate-microsoft-ca-signed-ssl-certificates-with-vsphere-5-1/</link><pubDate>Tue, 06 Nov 2012 16:59:11 +0000</pubDate><guid>https://www.definit.co.uk/2012/11/powershell-generate-microsoft-ca-signed-ssl-certificates-with-vsphere-5-1/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;The process of requesting certificates for vSphere 5.1 is a fairly grim, manual process. It&amp;rsquo;s repetitive and easy to make a mistake on any step of the way. Since I&amp;rsquo;ve got to do this for quite a few VirtualCenter Servers, I thought I&amp;rsquo;d script the certificate generation if nothing else. I am following the excellent documentation provided in &lt;!-- raw HTML omitted --&gt;Implementing CA signed SSL certificates with vSphere 5.1&lt;!-- raw HTML omitted --&gt; and more specifically in &lt;!-- raw HTML omitted --&gt;Creating certificate requests and certificates for vCenter Server 5.1 components&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;</description></item><item><title>Trouble with SCOM 2007 R2 Certificates? Validate the entire PKI path!</title><link>https://www.definit.co.uk/2012/01/troublewithscom2007r2certificates/</link><pubDate>Thu, 05 Jan 2012 11:30:23 +0000</pubDate><guid>https://www.definit.co.uk/2012/01/troublewithscom2007r2certificates/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2011/01/MSFT-System-Center-logo_thumb.png" alt=""&gt;I learned something new today: SCOM 2007 R2 certificate based communications not only checks the validity of the certificate you use, but also the CA that issued it…let me expand:&lt;/p&gt;
&lt;p&gt;Like many organisations there is a root CA (we&amp;rsquo;ll call it ROOTCA01), and then a subordinate CA (we&amp;rsquo;ll call that SUBCA01). OPSMGM01 has a certificate to identify itself and has certificates for ROOTCA01 and SUBCA01 in it&amp;rsquo;s Trusted Root Certificate Authorities.&lt;/p&gt;</description></item><item><title>Configuring a Guest wireless network with restricted access to Production VLANs</title><link>https://www.definit.co.uk/2011/06/configuring-guest-wireless-network-restricted-access-production-vlans/</link><pubDate>Wed, 29 Jun 2011 16:42:47 +0000</pubDate><guid>https://www.definit.co.uk/2011/06/configuring-guest-wireless-network-restricted-access-production-vlans/</guid><description>&lt;p&gt;It’s a fairly common requirement – setting up a guest WiFi network that is secure from the rest of your LAN. You need a secure WLAN access for the domain laptops which has full access to the Server and Client VLANs, but you also need a guest WLAN for visitors to the office which only allows internet access. Since the budget is limited, this must all be accomplished via a single Access Point – for this article, the access point is a Cisco WAP4410N.&lt;/p&gt;</description></item><item><title>Configuring SSTP VPN connections to Threat Management Gateway 2010</title><link>https://www.definit.co.uk/2011/03/configuring-sstp-vpn-connections-threat-management-gateway-2010/</link><pubDate>Thu, 24 Mar 2011 17:31:49 +0000</pubDate><guid>https://www.definit.co.uk/2011/03/configuring-sstp-vpn-connections-threat-management-gateway-2010/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2011/03/TMG2010_thumb.png" alt=""&gt;SSTP or SSL VPN connections are great for people working on client sites or behind very restrictive firewalls – they only require HTTPS (port 443) to be open to be able to connect. Unfortunately, you need to be running Windows 7 or Server 2008 (or newer) in order to make use of them. Threat Management Gateway 2010 is one option for an SSL VPN endpoint.&lt;/p&gt;
&lt;h3 id="sstp-vpn-requirements"&gt;SSTP VPN Requirements &lt;a class="anchor" href="#sstp-vpn-requirements"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Clients must be Windows 7/Server 2008 or newer&lt;/li&gt;
&lt;li&gt;Certificate – either commercial or an internal Certificate Authority&lt;/li&gt;
&lt;li&gt;Published CRL – SSTP clients check for the Certificate Revocation List of the CA&lt;/li&gt;
&lt;li&gt;If you already have an SSL listener (e.g. for Exchange publishing rules) then you need a dedicated IP address for the SSTP connection&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TMG is configured as a “back-firewall” in this environment, with an adaptor in the LAN and one in the Perimeter (DMZ). The DMZ has a NAT relationship to the External public IPs.&lt;/p&gt;</description></item><item><title>Using System Center Operations Manager 2007 R2 Audit Collection Services for remote, DMZ or workgroup servers</title><link>https://www.definit.co.uk/2010/12/using-system-centre-operations-manager-2007-r2-audit-collection-service-for-remote-dmz-or-workgroup-servers/</link><pubDate>Mon, 13 Dec 2010 16:46:07 +0000</pubDate><guid>https://www.definit.co.uk/2010/12/using-system-centre-operations-manager-2007-r2-audit-collection-service-for-remote-dmz-or-workgroup-servers/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/12/MSFT-System-Center-logo_thumb.png" alt=""&gt;SCOM 2007 R2’s Audit Collection Services (ACS from now on) is very useful for meeting compliance (e.g. Sarbanes Oxley) and security audit requirements – working with financial companies often requires such compliance. It’s pretty simple to install in a domain environment – you run the installer to create a collection server, then activate the forwarder on the client servers.&lt;/p&gt;
&lt;p&gt;When it comes to servers you really want to audit, those that are by definition more at risk from security breach because they are publicly accessible, it’s not so straightforward. Take for example that web server, or FTP host in your DMZ, certainly not domain joined and probably bombarded by daily brute force password attacks. Select the SCOM agent in the console and enable Audit Collection Services?&lt;/p&gt;</description></item><item><title>Requesting SCOM 2007 Gateway or Agent Certificates for Server 2008 from a Server 2003 Enterprise Certificate Authority</title><link>https://www.definit.co.uk/2010/06/requesting-scom-2007-gateway-or-agent-certificates-for-server-2008-from-a-server-2003-enterprise-certificate-authority/</link><pubDate>Fri, 25 Jun 2010 12:27:33 +0000</pubDate><guid>https://www.definit.co.uk/2010/06/requesting-scom-2007-gateway-or-agent-certificates-for-server-2008-from-a-server-2003-enterprise-certificate-authority/</guid><description>&lt;p&gt;This is a pretty specific set of instructions for a specific environment:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;If&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;you are using Microsoft System Center Operations Manager 2007&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;you have a Microsoft Certificate Services 2003 Certificate Authority on your domain&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;you have non-domain Windows Server 2008 servers you wish to monitor or set up as a gateway server.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Getting a certificate for either a Gateway Server or remotely monitored Server can be a touch vexing. If you’re installing on the same domain as the SCOM management server the security settings take care of themselves, not so for non-domain servers, which require mutual certificate authentication. The Gateway must trust the Domain CA and identify itself as trusted to the Management Server. I have bashed my head against this several times now, so I thought I’d make a precise blog post to cover the steps required!&lt;/p&gt;</description></item><item><title>Certificate errors when connecting Gateway Server or non-domain Agent to System Center Operations Manager 2007 R2</title><link>https://www.definit.co.uk/2010/05/certificate-errors-when-connecting-gateway-server-or-non-domain-agent-to-system-center-operations-manager-2007-r2/</link><pubDate>Fri, 07 May 2010 12:56:47 +0000</pubDate><guid>https://www.definit.co.uk/2010/05/certificate-errors-when-connecting-gateway-server-or-non-domain-agent-to-system-center-operations-manager-2007-r2/</guid><description>&lt;p&gt;This was a bit of an odd one. I was adding a Gateway Server to a newly rebuilt SCOM 2007 R2 Root Management Server when I kept encountering this error:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The certificate specified in the registry at HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft Operations Manager\3.0\Machine Settings cannot be used for authentication.  The error is The credentials supplied to the package were not recognized(0x8009030D).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I followed the Microsoft install and setup guides exactly, and it’s not my first time either – but I’d never seen that one before.&lt;/p&gt;</description></item></channel></rss>
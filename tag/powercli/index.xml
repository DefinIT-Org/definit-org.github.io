<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PowerCLI on DefinIT</title><link>https://www.definit.co.uk/tag/powercli/</link><description>Recent content in PowerCLI on DefinIT</description><generator>Hugo</generator><language>en-gb</language><lastBuildDate>Fri, 24 Nov 2017 13:31:14 +0000</lastBuildDate><atom:link href="https://www.definit.co.uk/tag/powercli/index.xml" rel="self" type="application/rss+xml"/><item><title>Introduction to NSX APIs – vBrownBag</title><link>https://www.definit.co.uk/2017/11/introduction-to-nsx-apis-vbrownbag/</link><pubDate>Fri, 24 Nov 2017 13:31:14 +0000</pubDate><guid>https://www.definit.co.uk/2017/11/introduction-to-nsx-apis-vbrownbag/</guid><description>&lt;p&gt;Last Tuesday I had the privilege of presenting an introduction to the NSX APIs on vBrownBag EMEA - you can view the recording below or on &lt;a href="https://www.youtube.com/channel/UCaZf13iWhwnBdpIkrEmHLbA"&gt;vBrownBag&amp;rsquo;s youtube channel.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;During the presentation I showed a mind map of the API, which I&amp;rsquo;ve made&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/sammcgeown/vBrownBagNSXAPI/blob/master/vBrownbag%20Introduction%20to%20NSX%20API.pdf"&gt;available on GitHub in PDF format&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2017/11/2017-11-24_13-22-20.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve also published the &lt;a href="https://github.com/sammcgeown/vBrownBagNSXAPI"&gt;Postman collection and environment&lt;/a&gt; I used during the demonstration, which covers some basic configuration and deploy tasks:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2017/11/2017-11-24_13-27-22.png" alt=""&gt;&lt;/p&gt;</description></item><item><title>Simon’s #VMworld 2017: Wednesday</title><link>https://www.definit.co.uk/2017/09/simons-vmworld-day-4-wednesday/</link><pubDate>Thu, 14 Sep 2017 17:30:50 +0000</pubDate><guid>https://www.definit.co.uk/2017/09/simons-vmworld-day-4-wednesday/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2017/09/VMworld-2017.jpg" alt=""&gt;This was as I expected, the busiest day sessions wise for me. There was so much good stuff I had to be a little ruthless on what I wanted and or needed to attend while also wanting to get into the solutions exchange.&lt;/p&gt;
&lt;p&gt;Also at the end of the day the customer appreciate party was scheduled so that was something I was looking forward to a great deal (Hint - Kaiser Chiefs)&lt;/p&gt;</description></item><item><title>Simon’s #VMworld 2017: Sunday and Monday</title><link>https://www.definit.co.uk/2017/09/simons-vmworld-day-1-and-2-sunday-and-monday/</link><pubDate>Tue, 12 Sep 2017 13:29:58 +0000</pubDate><guid>https://www.definit.co.uk/2017/09/simons-vmworld-day-1-and-2-sunday-and-monday/</guid><description>&lt;h2 id="sunday"&gt;&lt;img src="https://www.definit.co.uk/images/2017/09/VMworld-2017.jpg" alt=""&gt;Sunday &lt;a class="anchor" href="#sunday"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Arriving in early on Sunday as the local flight choices are more limited from Bristol than perhaps a larger Airport, very fortunate to have a hotel so close to the VMworld venue, perhaps not so great for the evening activities but I am happy with it this way around.&lt;/p&gt;
&lt;p&gt;Other than registration (4pm-8pm) and hopefully catching up with a few folk who have also arrived early.&lt;/p&gt;
&lt;p&gt;In the evening I had the pleasure to meet many awesome people from the vCommunity.&lt;/p&gt;</description></item><item><title>Sam’s #VMworld 2017: vSAN Specialist and VMware {Code} Hackathon</title><link>https://www.definit.co.uk/2017/09/sams-vmworld-2017-vsan-specialist-and-vmware-code-hackathon/</link><pubDate>Tue, 12 Sep 2017 10:41:39 +0000</pubDate><guid>https://www.definit.co.uk/2017/09/sams-vmworld-2017-vsan-specialist-and-vmware-code-hackathon/</guid><description>&lt;!-- raw HTML omitted --&gt;
&lt;h2 id="vmware-vsan-2017-specialist-exam"&gt;VMware vSAN 2017 Specialist Exam &lt;a class="anchor" href="#vmware-vsan-2017-specialist-exam"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;I always like to take a discounted exam at VMworld, this year I opted for the VMware vSAN 2017 Specialist exam, which was released a few weeks ago. Having delivered quite a few vSAN based solutions over the last few years, I was fairly confident in the blueprint. I am pleased to say that I passed the exam with a score of 422, way higher than I expected! I thought the exam itself was fair, and covered and tested the basics of vSAN well. You definitely need to know the supported architectures and how storage policies effect and apply to the data on vSAN.&lt;/p&gt;</description></item><item><title>PowerShell: Deploying vCenter High Availability in Advanced Mode</title><link>https://www.definit.co.uk/2017/06/powershell-deploying-vcenter-high-availability-in-advanced-mode/</link><pubDate>Fri, 30 Jun 2017 15:09:46 +0000</pubDate><guid>https://www.definit.co.uk/2017/06/powershell-deploying-vcenter-high-availability-in-advanced-mode/</guid><description>&lt;p&gt;With the release of vSphere 6.5, VMware upped the game for vCenter High Availability (vCHA) and introduced an active/passive/witness cluster setup to provide a failover cluster for vCenter Server Appliances. The diagram below shows the architecture of the solution.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Deploying vCHA can be done in two modes - &amp;ldquo;Basic&amp;rdquo; and &amp;ldquo;Advanced&amp;rdquo;. You can use Basic mode if the vCenter you want to be HA is managing the hosts it resides on - in this scenario the wizard configures your vCenter and deploys the Passive and Witness nodes for you. If you have a management cluster for your vCenter Server, or you are deploying a nested environment, you need to use the advanced mode - in this scenario you must configure your active node, deploy clones for the passive and witness nodes, then enable the configuration.&lt;/p&gt;</description></item><item><title>#vROps Webinar Series – Part 11 – Getting more out of #vROps with PowerCLI</title><link>https://www.definit.co.uk/2016/11/vrops-webinar-series-part-11-getting-more-out-of-vrops-with-powercli-2/</link><pubDate>Sat, 26 Nov 2016 12:10:06 +0000</pubDate><guid>https://www.definit.co.uk/2016/11/vrops-webinar-series-part-11-getting-more-out-of-vrops-with-powercli-2/</guid><description>&lt;p&gt;Time to publish the recording for the 11th episode of the vROps Webinar Series. This time we were joined by &lt;a href="https://twitter.com/vinithmenon28"&gt;Vinith Menon&lt;/a&gt; who spoke about getting more from your vROps builds with PowerCLI. Vinith demonstrated the many useful ways of leveraging PowerCLI to manage your vROps environments and also communicate with the vROps API.&lt;/p&gt;
&lt;p&gt;Huge thanks to &lt;a href="https://twitter.com/vinithmenon28"&gt;Vinith Menon&lt;/a&gt; for presenting this excellent session.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;So without further ado, here is the recording for this session:&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>#vROps Webinar Series – Announcing Part 11 – Getting more out of #vROps with PowerCLI</title><link>https://www.definit.co.uk/2016/11/vrops-webinar-series-part-11-getting-more-out-of-vrops-with-powercli/</link><pubDate>Tue, 22 Nov 2016 13:05:55 +0000</pubDate><guid>https://www.definit.co.uk/2016/11/vrops-webinar-series-part-11-getting-more-out-of-vrops-with-powercli/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2016/01/CZFR4nKUsAADI5G.png" alt=""&gt;Another month has gone and Christmas is now looming large! It has been extremely busy but we still want to continue with the momentum of webinar series getting to the business end of the year. This time around we will talk about getting more out of vRealize Operations Manager using PowerCLI.&lt;/p&gt;
&lt;p&gt;This session we will be joined by &lt;a href="https://twitter.com/vinithmenon28"&gt;Vinith Menon&lt;/a&gt; who will show us all kinds of PowerCLI goodness.&lt;/p&gt;
&lt;p&gt;So without further a do, save the date in your calendars and join use for the next episode of vRealize Operations Webinar Series 2016.&lt;/p&gt;</description></item><item><title>Installing .NET core, PowerShell and PowerCLI on macOS Sierra</title><link>https://www.definit.co.uk/2016/10/installing-net-core-powershell-and-powercli-on-macos-sierra/</link><pubDate>Tue, 18 Oct 2016 10:52:22 +0000</pubDate><guid>https://www.definit.co.uk/2016/10/installing-net-core-powershell-and-powercli-on-macos-sierra/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2016/10/powerclicore140x140.jpg" alt=""&gt;So, this is something I&amp;rsquo;ve been waiting to write up for a while! PowerShell for macOS has been available for a while now, but what a lot of PowerCLI fans have been waiting for is to be able to use PowerCLI direct from their Mac.&lt;/p&gt;
&lt;p&gt;Today, amidst all of the noise from VMWorld, PowerCLI Core dropped as a Fling! That means that although it&amp;rsquo;s not ready for production use yet, it is ready to start testing - and I&amp;rsquo;m way more excited than I should be!&lt;/p&gt;</description></item><item><title>Automate the deployment of vROps (supporting vDS)</title><link>https://www.definit.co.uk/2015/05/automate-the-deployment-of-vrops-supporting-vds/</link><pubDate>Mon, 18 May 2015 12:50:17 +0000</pubDate><guid>https://www.definit.co.uk/2015/05/automate-the-deployment-of-vrops-supporting-vds/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2015/05/powercli-logo.png" alt=""&gt;Recently I have been looking at &lt;a href="http://www.virtuallyghetto.com/" title="VirutallyGhetto"&gt;William Lam&lt;/a&gt;&amp;rsquo;s excellent post on &lt;a href="http://www.virtuallyghetto.com/2014/12/automate-deployment-configuration-of-vrealize-operations-manager-6-0-part-1.html" title="Automate Deployment &amp;amp; Configuration of vRealize Operations Manager"&gt;automating&lt;/a&gt; the deployment of vROps.&lt;/p&gt;
&lt;p&gt;After having a play around with it, to suit my own needs, I made some modifications to the Powershell script so it would support distributed switches.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;# William Lam&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;# Edited by Simon Eady to support vDS&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;# &lt;a href="https://www.virtuallyghetto.com"&gt;www.virtuallyghetto.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;# Deployment of vRealize Operations Manager 6.0 (vROps)&lt;/p&gt;
&lt;p&gt;### NOTE: SSH can not be enabled because hidden properties do not seem to be implemented in Get-OvfConfiguration cmdlet ###&lt;/p&gt;</description></item><item><title>Another fantastic South West UK VMUG</title><link>https://www.definit.co.uk/2014/06/another-fantastic-south-west-uk-vmug/</link><pubDate>Sun, 08 Jun 2014 09:09:33 +0000</pubDate><guid>https://www.definit.co.uk/2014/06/another-fantastic-south-west-uk-vmug/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2014/06/vmug_logo.png" alt=""&gt;On the 3rd of June we had our second &lt;a href="http://www.vmug.com/index.php?mo=cm&amp;amp;op=ld&amp;amp;fid=217&amp;amp;gid=255" title="South West UK VMUG"&gt;South West UK VMUG&lt;/a&gt; and I am pleased to say it went superbly well.&lt;/p&gt;
&lt;p&gt;As before we held it at the &lt;a href="http://mshed.org/"&gt;Mshed&lt;/a&gt; facilities in Bristol.&lt;/p&gt;
&lt;p&gt;We had a great day with many sessions from sponsors,vendors and community speakers alike!&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Big thanks&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; go to our speakers that day who were..&lt;/p&gt;</description></item><item><title>PowerCLI &amp;ndash; Warning! New-VirtualSwitch without the &amp;ndash;NumPorts parameter defaults to 56 ports!</title><link>https://www.definit.co.uk/2013/08/powercli-warning-new-virtualswitch-without-the-numports-parameter-defaults-to-56-ports/</link><pubDate>Wed, 28 Aug 2013 10:48:46 +0000</pubDate><guid>https://www.definit.co.uk/2013/08/powercli-warning-new-virtualswitch-without-the-numports-parameter-defaults-to-56-ports/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;There’s not a lot more to say than the title of this post – if you create a new Virtual Switch using PowerCLI without specifying the NumPorts parameter, it defaults to 64 ports. This strikes me as odd when the default for a standard switch is 120.&lt;/p&gt;
&lt;p&gt;You can see in the screenshot below that when I create a Virtual Switch without the parameter, it creates it with 64 ports. Once you minus the 8 reserved for physical NIC ports (uplinks), CDP traffic, and network discovery it leaves you with 56 ports available for VMs.&lt;/p&gt;</description></item><item><title>London VMUG &amp;ndash; July 2013</title><link>https://www.definit.co.uk/2013/07/london-vmug-july-2013/</link><pubDate>Fri, 05 Jul 2013 12:54:05 +0000</pubDate><guid>https://www.definit.co.uk/2013/07/london-vmug-july-2013/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2013/07/20130705003.png" alt=""&gt;Yesterday I attended my second ever #LonVMUG and did my first ever VMUG presentation! Generally it was a great day, with loads of really good sessions and some really cool community and vendor content.&lt;/p&gt;
&lt;p&gt;As ever it was great day for socialising and networking with people who you interact with on twitter. For me one of the major benefits of the VMUG is learning from other people’s experience. Twitter was alive with the hastag #LonVMUG and it definitely adds something to the day to be active&lt;/p&gt;</description></item><item><title>PowerCLI Basics: Auditing Virtual Machine Hardware and Tools using PowerCLI</title><link>https://www.definit.co.uk/2013/06/powercli-basics-auditing-virtual-machine-hardware-and-tools-using-powercli/</link><pubDate>Thu, 27 Jun 2013 15:38:42 +0000</pubDate><guid>https://www.definit.co.uk/2013/06/powercli-basics-auditing-virtual-machine-hardware-and-tools-using-powercli/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;The VM estate that I manage is large: there are more than 20 different clusters and over 300 hosts of varying ages and hardware levels – as a consequence there are various different versions of ESX and ESXi running. Upgrading the hosts is somewhat akin to painting the Forth Bridge, a never-ending task. So keeping the thousands of VMs at the correct hardware and VMtools versions can be a bit of a losing battle.&lt;/p&gt;</description></item><item><title>Changing ESXi root passwords the smart way (via PowerCLI)</title><link>https://www.definit.co.uk/2013/06/changing-esxi-root-passwords-the-smart-way-via-powercli/</link><pubDate>Tue, 04 Jun 2013 15:08:49 +0000</pubDate><guid>https://www.definit.co.uk/2013/06/changing-esxi-root-passwords-the-smart-way-via-powercli/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;If you work in company with strict password compliance rules, for example under SOX, you might well have to change administrator passwords every month. Doing this on any more than a few hosts is tedious work – even on two hosts it seems like a waste of time logging on the host via SSH (or even enabling it first) before changing the password. Then we also need to audit the change, there’s no point making it for compliance reasons if we can’t then prove we did it!&lt;/p&gt;</description></item><item><title>PowerCLI Script to set RDM LUNs to Perennially Reserved – Fixes Slow Boot of ESXi 5.1 with MSCS RDMs</title><link>https://www.definit.co.uk/2013/03/powercli-script-to-set-rdm-luns-to-perennially-reserved-fixes-slow-boot-of-esxi-5-1-with-mscs-rdms/</link><pubDate>Wed, 06 Mar 2013 14:02:52 +0000</pubDate><guid>https://www.definit.co.uk/2013/03/powercli-script-to-set-rdm-luns-to-perennially-reserved-fixes-slow-boot-of-esxi-5-1-with-mscs-rdms/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;I&amp;rsquo;ve previously &lt;a href="http://bit.ly/Ppl7Hl"&gt;posted around this topic&lt;/a&gt; as part of another problem but having had to figure out the process again I think it&amp;rsquo;s worth re-posting a proper script for this. &lt;!-- raw HTML omitted --&gt;VMware KB 1016106 &lt;!-- raw HTML omitted --&gt;is snappily titled &amp;ldquo;ESXi/ESX hosts with visibility to RDM LUNs being used by MSCS nodes with RDMs may take a long time to boot or during LUN rescan&amp;rdquo; and describes the situation where booting ESXi (5.1 in my case) takes a huge amount of time to boot because it&amp;rsquo;s attempting to gain a SCSI reservation on an RDM disk used by MS Clustering Services. It also details the fix.&lt;/p&gt;</description></item><item><title>Powershell – Generate Microsoft CA signed SSL certificates with vSphere 5.1</title><link>https://www.definit.co.uk/2012/11/powershell-generate-microsoft-ca-signed-ssl-certificates-with-vsphere-5-1/</link><pubDate>Tue, 06 Nov 2012 16:59:11 +0000</pubDate><guid>https://www.definit.co.uk/2012/11/powershell-generate-microsoft-ca-signed-ssl-certificates-with-vsphere-5-1/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;The process of requesting certificates for vSphere 5.1 is a fairly grim, manual process. It&amp;rsquo;s repetitive and easy to make a mistake on any step of the way. Since I&amp;rsquo;ve got to do this for quite a few VirtualCenter Servers, I thought I&amp;rsquo;d script the certificate generation if nothing else. I am following the excellent documentation provided in &lt;!-- raw HTML omitted --&gt;Implementing CA signed SSL certificates with vSphere 5.1&lt;!-- raw HTML omitted --&gt; and more specifically in &lt;!-- raw HTML omitted --&gt;Creating certificate requests and certificates for vCenter Server 5.1 components&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;</description></item><item><title>DataStore conflicts with an existing DataStore in the DataCenter – Manually disabling Storage I/O Control</title><link>https://www.definit.co.uk/2012/10/datastore-conflicts-with-an-existing-datastore-in-the-datacenter-manually-disabling-storage-io-control/</link><pubDate>Wed, 17 Oct 2012 15:31:01 +0000</pubDate><guid>https://www.definit.co.uk/2012/10/datastore-conflicts-with-an-existing-datastore-in-the-datacenter-manually-disabling-storage-io-control/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;I ran into this issue yesterday while reconnecting hosts in our vCenter Server following a complete reinstall - the reasons for which are a long story, but suffice to say that there were new certificates and the host passwords were encrypted with the old ones.&lt;/p&gt;
&lt;p&gt;The LUNs had been unpresented at the hardware level by the storage team, but had not been unmounted or removed from vCenter. This is &lt;em&gt;&lt;strong&gt;not&lt;/strong&gt;&lt;/em&gt; the way to remove storage - let me re-iterate: &lt;a href="http://blogs.vmware.com/vsphere/2011/11/best-practice-how-to-correctly-remove-a-lun-from-an-esx-host.html"&gt;remove storage properly&lt;/a&gt;. Unfortunately in this case the storage was removed badly - doing this can lead to a condition called &amp;ldquo;All Paths Down&amp;rdquo; or APD which is best explained by Cormac Hogan (@vmwarestorage) in the article &lt;a href="http://blogs.vmware.com/vsphere/2011/08/all-path-down-apd-handling-in-50.html"&gt;Handling the All Paths Down (APD) condition&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>Converting vSphere Custom Attributes to Categories and Tags</title><link>https://www.definit.co.uk/2012/09/converting-vsphere-custom-attributes-to-categories-and-tags/</link><pubDate>Tue, 25 Sep 2012 09:34:57 +0000</pubDate><guid>https://www.definit.co.uk/2012/09/converting-vsphere-custom-attributes-to-categories-and-tags/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;In vSphere 5.1 &amp;ldquo;Tags&amp;rdquo; replace the old custom attributes to provide a way of adding metadata to vSphere objects. The &amp;ldquo;Tags&amp;rdquo; are organised into categories to &amp;ldquo;define how the tags can be applied to inventory objects&amp;rdquo;. The easiest way to think of the difference is that custom attributes are &amp;ldquo;free text&amp;rdquo; and the tags are statically defined properties.&lt;/p&gt;
&lt;p&gt;There is a wizard for converting custom attributes to tags, but it can get a bit confusing and is pretty poor - let me explain. We use four custom attributes in my current environment: CreatedBy, CreatedOn, Owner and ServiceType. CreatedBy contains the user ID of the person who created the VM, CreatedOn is the timestamp of when the VM was created, Owner is the Business Unit who own the server and ServiceType is the type of service - e.g. Active Directory, or SQL.&lt;/p&gt;</description></item><item><title>VMware PowerCLI – Set Path Selection Policy on all LUNs for a host</title><link>https://www.definit.co.uk/2011/10/vmware-powercli-set-path-selection-policy-on-all-luns-for-a-host/</link><pubDate>Fri, 28 Oct 2011 11:08:40 +0000</pubDate><guid>https://www.definit.co.uk/2011/10/vmware-powercli-set-path-selection-policy-on-all-luns-for-a-host/</guid><description>&lt;p&gt;Just a quick script to set the Path Selection Policy on any LUNs on a host that do not have your target policy enabled. The script sets the server to Maintenance mode first, evacuating any VMs if you are in a full DRS automated environment. While this is not strictly necessary, it was required for my production environment just to be safe.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;</description></item></channel></rss>
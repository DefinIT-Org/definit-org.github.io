<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ESX and ESXi on DefinIT</title><link>https://www.definit.co.uk/tag/esx-and-esxi/</link><description>Recent content in ESX and ESXi on DefinIT</description><generator>Hugo</generator><language>en-gb</language><lastBuildDate>Wed, 01 Apr 2015 19:11:49 +0000</lastBuildDate><atom:link href="https://www.definit.co.uk/tag/esx-and-esxi/index.xml" rel="self" type="application/rss+xml"/><item><title>vSphere 6 Lab Upgrade ‚Äì Upgrading ESXi 5.5</title><link>https://www.definit.co.uk/2015/04/vsphere-6-lab-upgrade-upgrading-esxi-5-5/</link><pubDate>Wed, 01 Apr 2015 19:11:49 +0000</pubDate><guid>https://www.definit.co.uk/2015/04/vsphere-6-lab-upgrade-upgrading-esxi-5-5/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2014/07/vSphereLogo.png" alt=""&gt;I tested vSphere 6 quite intensively when it was in beta, but I didn&amp;rsquo;t ever upgrade my lab - basically because I need a stable environment to work on and I wasn&amp;rsquo;t sure that I could maintain that with the beta.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id="checking-for-driver-compatibility"&gt;Checking for driver compatibility &lt;a class="anchor" href="#checking-for-driver-compatibility"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;In vSphere 5.5, VMware dropped the drivers for quite a few consumer grade NICs - in 6 they&amp;rsquo;ve gone a step further and actually blocked quite a few of these using a VIB package. For more information, see this &lt;!-- raw HTML omitted --&gt;excellent article by Andreas Peetz&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;</description></item><item><title>Some useful VMware related diagrams</title><link>https://www.definit.co.uk/2014/04/some-useful-vsphere-related-diagrams/</link><pubDate>Tue, 01 Apr 2014 16:09:11 +0000</pubDate><guid>https://www.definit.co.uk/2014/04/some-useful-vsphere-related-diagrams/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware1.jpg" alt=""&gt;One of the things that never fails to amaze me are the superb PDF diagrams I occasionally stumble upon so i thought it would be a useful idea to list some of the the ones I have found on my travels.&lt;/p&gt;
&lt;h2 id="vsphere-6-esxtop-quick-overview-for-troubleshooting"&gt;vSphere 6 ESXTOP quick Overview for Troubleshooting &lt;a class="anchor" href="#vsphere-6-esxtop-quick-overview-for-troubleshooting"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href="http://www.running-system.com/images/2015/04/ESXTOP_vSphere6.pdf" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; http://www.running-system.com/images/2015/04/ESXTOP_vSphere6.pdf
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;¬†&lt;/p&gt;
&lt;p&gt;¬†&lt;/p&gt;
&lt;p&gt;¬†&lt;/p&gt;
&lt;p&gt;¬†&lt;/p&gt;
&lt;p&gt;¬†&lt;/p&gt;
&lt;p&gt;¬†&lt;/p&gt;
&lt;h2 id=""&gt; &lt;a class="anchor" href="#"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;h2 id="vmware-vsphere-5-memory-management-and-monitoring-diagram"&gt;VMware vSphere 5 Memory Management and Monitoring diagram &lt;a class="anchor" href="#vmware-vsphere-5-memory-management-and-monitoring-diagram"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=2017642" title="vSphere 5 Memory Management diagram" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=2017642
&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Path Selection Policies after removing PernixData</title><link>https://www.definit.co.uk/2014/03/multipath-policies-after-removing-pernixdata/</link><pubDate>Wed, 26 Mar 2014 23:45:42 +0000</pubDate><guid>https://www.definit.co.uk/2014/03/multipath-policies-after-removing-pernixdata/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2014/02/pernixdata1.png" alt=""&gt;Recently I have had the pleasure to use PernixData but I did come across a bit of a &amp;lsquo;gotcha&amp;rsquo; after uninstalling it from my hosts.&lt;/p&gt;
&lt;p&gt;If like me you use iSCSI then you will likely spend a bit of time setting up your Path Selection Polices to suit your specific needs, so it was interesting to note the following.&lt;/p&gt;
&lt;p&gt;When you do uninstall and remove PernixData from your hosts your Path Selection Polices¬†do not revert back to your original configuration rather they revert back to the default vSphere setting of MRU (Most recently used).&lt;/p&gt;</description></item><item><title>Extending a vCenter Orchestrator (vCO) Workflow with ForEach &amp;ndash; Backing up all ESXi hosts in a Cluster</title><link>https://www.definit.co.uk/2014/03/extending-a-vcenter-orchestrator-vco-workflow-with-foreach-backing-up-all-esxi-hosts-in-a-cluster/</link><pubDate>Thu, 20 Mar 2014 12:38:28 +0000</pubDate><guid>https://www.definit.co.uk/2014/03/extending-a-vcenter-orchestrator-vco-workflow-with-foreach-backing-up-all-esxi-hosts-in-a-cluster/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;In my previous post &lt;a href="https://www.definit.co.uk/?p=4262" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; Backing up ESXi 5.5 host configurations with vCenter Orchestrator (vCO) ‚Äì Workflow design walkthrough
&lt;/a&gt; I showed how to create a workflow to back up host configurations, but it was limited to one host at a time. For this post I‚Äôm going to show how to create a new workflow that calls the previous one on multiple hosts using a ForEach loop to run it against each one. This was actually easier than I had anticipated (having read posts on previous versions of vCO that involved created the loops manually).&lt;/p&gt;</description></item><item><title>Backing up ESXi 5.5 host configurations with vCenter Orchestrator (vCO) &amp;ndash; Workflow design walkthrough</title><link>https://www.definit.co.uk/2014/03/backing-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough/</link><pubDate>Thu, 13 Mar 2014 16:27:19 +0000</pubDate><guid>https://www.definit.co.uk/2014/03/backing-up-esxi-5-5-host-configurations-with-vcenter-orchestrator-vco-workflow-design-walkthrough/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;As a little learning project, I thought I‚Äôd take on &lt;a href="http://vexpert.me/kd" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; Simon‚Äôs previous post
&lt;/a&gt; about backing up ESXi configurations and extend it to vCenter Orchestrator (vCO), and document how I go about building up a workflow. I&amp;rsquo;m learning more and more about vCO all the time, but I found it has a really steep entry point, and finding use cases is hard if you haven&amp;rsquo;t explored capabilities.&lt;/p&gt;</description></item><item><title>How to backup and restore your ESXi host config</title><link>https://www.definit.co.uk/2014/03/how-to-backup-and-restore-your-esxi-host-config/</link><pubDate>Wed, 05 Mar 2014 19:15:13 +0000</pubDate><guid>https://www.definit.co.uk/2014/03/how-to-backup-and-restore-your-esxi-host-config/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware.jpg" alt=""&gt;There are many ways to tackle the problem of quickly redeploying or recovering ESXi hosts, Host profiles, Auto deploy etc.. however such options are either out of reach for SME/SMB users where their license does not cover such features or they have very small clusters of which Auto deploy etc would perhaps be considered overkill.&lt;/p&gt;
&lt;p&gt;So how can we backup the config of our ESXi hosts? There is a great command you can use in &lt;a href="https://my.vmware.com/web/vmware/details?productId=285&amp;amp;downloadGroup=VSP510-VCLI-510" title="vSphere CLI download" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; vSphere CLI
&lt;/a&gt;¬†&amp;ldquo;&lt;!-- raw HTML omitted --&gt;vicfg-cfgbackup.pl&lt;!-- raw HTML omitted --&gt;&amp;rdquo;, which when used with certain switches can either back up or restore your ESXi host config.&lt;/p&gt;</description></item><item><title>Reclaiming an SSD device from ESXi 5.5 Virtual Flash</title><link>https://www.definit.co.uk/2014/02/reclaiming-an-ssd-device-from-esxi-5-5-virtual-flash/</link><pubDate>Thu, 27 Feb 2014 14:02:51 +0000</pubDate><guid>https://www.definit.co.uk/2014/02/reclaiming-an-ssd-device-from-esxi-5-5-virtual-flash/</guid><description>&lt;p&gt;After having a play with Virtual Flash and Host Caching on one of my lab hosts I wanted to re-use the SSD drive, but couldn‚Äôt seem to get vFlash to release the drive. I disabled flash usage on all VMs and disabled the Host Cache, then went to the Virtual Flash Resource Management page to click the ‚ÄúRemove All‚Äù button. That failed with errors:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúHost‚Äôs virtual flash resource is inaccessible.‚Äù&lt;/p&gt;</description></item><item><title>Trouble shooting ‚Äì esx.problem.visorfs.ramdisk.full</title><link>https://www.definit.co.uk/2014/02/trouble-shooting-esx-problem-visorfs-ramdisk-full/</link><pubDate>Tue, 04 Feb 2014 14:47:50 +0000</pubDate><guid>https://www.definit.co.uk/2014/02/trouble-shooting-esx-problem-visorfs-ramdisk-full/</guid><description>&lt;h2 id="problem"&gt;Problem &lt;a class="anchor" href="#problem"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Fairly recently I came across this error message on one of my hosts &amp;ldquo;esx.problem.visorfs.ramdisk.full&amp;rdquo;&lt;/p&gt;
&lt;h2 id="fallout"&gt;Fallout &lt;a class="anchor" href="#fallout"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;While trying to address the issue I had the following problems when the ramdisk did indeed &amp;ldquo;fill up&amp;rdquo;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PSOD (worst case happened only once in my experience)&lt;/li&gt;
&lt;li&gt;VM&amp;rsquo;s struggling to vMotion from the affected host when putting into maintenance mode.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="temporary-workaround"&gt;Temporary workaround &lt;a class="anchor" href="#temporary-workaround"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;A reboot of the host would clear the problem (clear out the ramdisk) for a short while but the problem will return if not addressed properly.&lt;/p&gt;</description></item><item><title>How to Virtualize Mac OS X using ESXi 5.1</title><link>https://www.definit.co.uk/2014/01/how-to-virtualize-mac-os-x-using-esxi-5-1/</link><pubDate>Fri, 17 Jan 2014 15:02:09 +0000</pubDate><guid>https://www.definit.co.uk/2014/01/how-to-virtualize-mac-os-x-using-esxi-5-1/</guid><description>&lt;p&gt;As a proof of concept I recently tried to virtualize OS X (Mountain Lion) - It is important to note that VMware is now licensed to do so and you can &lt;a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=1000131" title="Virtualizing Apple Mac OS X - KB Article" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; read more here
&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The following is an overview of the steps I followed to achieve my goal in some cases it was trial an error as I am not a regular Mac user.&lt;/p&gt;</description></item><item><title>vSphere Security: Advanced SSH Configurations</title><link>https://www.definit.co.uk/2013/10/vsphere-security-advanced-ssh-configurations/</link><pubDate>Tue, 22 Oct 2013 14:26:41 +0000</pubDate><guid>https://www.definit.co.uk/2013/10/vsphere-security-advanced-ssh-configurations/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2013/10/Security-Guard_thumb2_thumb.png" alt=""&gt;There are different schools of thought as to whether you should have SSH enabled on your hosts. VMware recommend it is disabled. With SSH disabled there is no possibility of attack, so that‚Äôs the ‚Äúmost secure‚Äù option. Of course in the real world there‚Äôs a balance between ‚Äúmost secure‚Äù and ‚Äúusability‚Äù (e.g. the most secure host is powered off and physically isolated from the network, but you can‚Äôt run any workloads &lt;!-- raw HTML omitted --&gt;). My preferred route is to have it enabled but locked down.&lt;/p&gt;</description></item><item><title>VMworld Europe 2013 ‚Äì Day 1</title><link>https://www.definit.co.uk/2013/10/vmworld-europe-2013-arriving-and-day-1/</link><pubDate>Tue, 15 Oct 2013 15:22:30 +0000</pubDate><guid>https://www.definit.co.uk/2013/10/vmworld-europe-2013-arriving-and-day-1/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;I flew from Gatwick to Barcelona last night to my very first VMworld!&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m staying in a hotel that is actually quite far from the conference, it&amp;rsquo;s¬†a metro, train and bus journey away from the conference center and it takes about 40 minutes to get here. On the plus side I was only 5 minutes away from the VMUG party last night so I went over there for an hour or so. Note for future years - stay a little closer to the conference!&lt;/p&gt;</description></item><item><title>Recover ESXi Root Password using AD Authentication</title><link>https://www.definit.co.uk/2013/10/recover-esxi-root-password-using-ad-authentication/</link><pubDate>Mon, 07 Oct 2013 10:12:08 +0000</pubDate><guid>https://www.definit.co.uk/2013/10/recover-esxi-root-password-using-ad-authentication/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;Losing a root password isn‚Äôt something that happens often, but when it does it‚Äôs normally a really irritating time. I have to rotate the password of all hosts once a month for compliance, but sometimes a host drops out of the loop and the root password gets lost. Fortunately, as the vpxuser is still valid I can manage the host via vCenter - this lends itself to this little recovery process:&lt;/p&gt;</description></item><item><title>vSphere Security: Active Directory Authentication</title><link>https://www.definit.co.uk/2013/10/vsphere-security-active-directory-authentication/</link><pubDate>Fri, 04 Oct 2013 15:13:34 +0000</pubDate><guid>https://www.definit.co.uk/2013/10/vsphere-security-active-directory-authentication/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;This is the second article in a series of vSphere Security articles that I have planned. The majority of this article is based on vSphere/ESXi 5.1, though I will include any 5.5 information that I find relevant. The first article in this series was &lt;a href="https://www.definit.co.uk/2013/09/vsphere-security-understanding-esxi-5-x-lockdown-mode/" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; vSphere Security: Understanding ESXi 5.x Lockdown Mode
&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Why would you want to join an ESXi host to an Active Directory domain? Well you‚Äôre not going to get Group Policies applying, what you‚Äôre really doing is adding another authentication provider directly to the ESXi host. You will see a computer object created in AD, but you will still need to create a DNS entry (or configure DHCP to do it for you). What you will get is a way to audit root access to your hosts, to give administrators a single sign on for managing all aspects of your virtual environment and more options in your administrative arsenal ‚Äì for example, if you‚Äôre using an AD group to manage host root access, you don‚Äôt have to log onto however many ESXi hosts you have to remove a user‚Äôs permissions, simply remove them from the group. You can keep your root passwords in a sealed envelope for emergencies! üòâ&lt;/p&gt;</description></item><item><title>vSphere Security: Understanding ESXi 5.x Lockdown Mode</title><link>https://www.definit.co.uk/2013/09/vsphere-security-understanding-esxi-5-x-lockdown-mode/</link><pubDate>Thu, 26 Sep 2013 10:05:02 +0000</pubDate><guid>https://www.definit.co.uk/2013/09/vsphere-security-understanding-esxi-5-x-lockdown-mode/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;This is the first article in a series of vSphere Security articles that I have planned. The majority of this article is based on vSphere/ESXi 5.1, though I will include any 5.5 information that I find relevant.&lt;/p&gt;
&lt;p&gt;I think lockdown mode is a feature that is rarely understood, and even more rarely used. Researching this article I‚Äôve already encountered several different definitions that weren‚Äôt quite right. As far as I can see there are no differences between lockdown more in 5.5 and 5.1.&lt;/p&gt;</description></item><item><title>vSphere 5.5 ‚Äì what I like from what‚Äôs new..</title><link>https://www.definit.co.uk/2013/09/vsphere-5-5-what-i-like-from-whats-new/</link><pubDate>Fri, 06 Sep 2013 16:17:50 +0000</pubDate><guid>https://www.definit.co.uk/2013/09/vsphere-5-5-what-i-like-from-whats-new/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware.jpg" alt=""&gt;&lt;/p&gt;
&lt;p&gt;With vSphere 5.5 being announced at VMworld San Francisco I was very eager to see what was new and after devouring all of the great blog posts out there of the guys in attendance I wanted to summarize in my own way the aspects I think are great!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;**VMDK 2TB limitation removed! (also virtual mode RDMs)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;** This has to be one of the best pieces of news as it has been in the rear trying to accommodate really large VMs (changes affect both VMFS and NFS)&lt;/p&gt;</description></item><item><title>vSphere Basics: Correctly decommissioning a vSphere Datastore</title><link>https://www.definit.co.uk/2013/08/vsphere-basics-correctly-decommissioning-a-vsphere-datastore/</link><pubDate>Wed, 14 Aug 2013 12:04:48 +0000</pubDate><guid>https://www.definit.co.uk/2013/08/vsphere-basics-correctly-decommissioning-a-vsphere-datastore/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;You‚Äôd be surprised how many times I see datastore that‚Äôs just been un-presented from hosts rather than decommissioned correctly ‚Äì in one notable case I saw a distributed switch crippled for a whole cluster because the datastore in question was being used to store the VDS configuration.&lt;/p&gt;
&lt;p&gt;This is the process that I follow to ensure datastores are decommissioned without any issues ‚Äì they need to comply with these requirements&lt;/p&gt;</description></item><item><title>Installing VMware vSphere Update Manager Download Service and publishing via IIS</title><link>https://www.definit.co.uk/2013/06/installing-vmware-vsphere-update-manager-download-service-and-publishing-via-iis/</link><pubDate>Tue, 11 Jun 2013 15:30:49 +0000</pubDate><guid>https://www.definit.co.uk/2013/06/installing-vmware-vsphere-update-manager-download-service-and-publishing-via-iis/</guid><description>&lt;p&gt;The vSphere UMDS provides a way to download patches for VMware servers that have an air-gap, or for some reason aren‚Äôt allowed to go out to the internet themselves ‚Äì in my case a security policy prevented a DMZ vCenter Server from connecting to the internet directly. The solution is to use UMDS to download the updates to a 2nd server that was hosted in the DMZ and then update the vCenter Server from there. It also can save on bandwidth if you‚Äôre running multiple vCenter Servers, which again was the case (though bandwidth isn‚Äôt really a constraint).&lt;/p&gt;</description></item><item><title>Changing ESXi root passwords the smart way (via PowerCLI)</title><link>https://www.definit.co.uk/2013/06/changing-esxi-root-passwords-the-smart-way-via-powercli/</link><pubDate>Tue, 04 Jun 2013 15:08:49 +0000</pubDate><guid>https://www.definit.co.uk/2013/06/changing-esxi-root-passwords-the-smart-way-via-powercli/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;If you work in company with strict password compliance rules, for example under SOX, you might well have to change administrator passwords every month. Doing this on any more than a few hosts is tedious work ‚Äì even on two hosts it seems like a waste of time logging on the host via SSH (or even enabling it first) before changing the password. Then we also need to audit the change, there‚Äôs no point making it for compliance reasons if we can‚Äôt then prove we did it!&lt;/p&gt;</description></item><item><title>Updating ESXi Fibre Channel HBA Drivers via VMware Update Manager</title><link>https://www.definit.co.uk/2013/05/updating-esxi-fibre-channel-hba-drivers-via-vmware-update-manager/</link><pubDate>Tue, 07 May 2013 14:41:43 +0000</pubDate><guid>https://www.definit.co.uk/2013/05/updating-esxi-fibre-channel-hba-drivers-via-vmware-update-manager/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware2.jpg" alt=""&gt;A problem reared it&amp;rsquo;s head over the weekend with one of our hosts&amp;rsquo; Fibre Channel HBAs negotiating it&amp;rsquo;s way down to 2GB, and consequently introducing massive latency for the LUNs behind it. Analysis showed that the drivers for the HBA were over a year out of date so the suggested fix from VMware was to update the drivers. This is fine to do manually for a few hosts, but would be a real pain for the 300+ hosts in the environment I manage.&lt;/p&gt;</description></item><item><title>PowerCLI Script to set RDM LUNs to Perennially Reserved ‚Äì Fixes Slow Boot of ESXi 5.1 with MSCS RDMs</title><link>https://www.definit.co.uk/2013/03/powercli-script-to-set-rdm-luns-to-perennially-reserved-fixes-slow-boot-of-esxi-5-1-with-mscs-rdms/</link><pubDate>Wed, 06 Mar 2013 14:02:52 +0000</pubDate><guid>https://www.definit.co.uk/2013/03/powercli-script-to-set-rdm-luns-to-perennially-reserved-fixes-slow-boot-of-esxi-5-1-with-mscs-rdms/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;I&amp;rsquo;ve previously &lt;a href="http://bit.ly/Ppl7Hl" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; posted around this topic
&lt;/a&gt; as part of another problem but having had to figure out the process again I think it&amp;rsquo;s worth re-posting a proper script for this. &lt;!-- raw HTML omitted --&gt;VMware KB 1016106¬†&lt;!-- raw HTML omitted --&gt;is snappily titled &amp;ldquo;ESXi/ESX hosts with visibility to RDM LUNs being used by MSCS nodes with RDMs may take a long time to boot or during LUN rescan&amp;rdquo; and describes the situation where booting ESXi (5.1 in my case) takes a huge amount of time to boot¬†because it&amp;rsquo;s attempting to gain a SCSI reservation on an RDM disk used by MS Clustering Services. It also details the fix.&lt;/p&gt;</description></item><item><title>Fixing the ‚Äì the server fault invalidargument had no message ‚Äì error message</title><link>https://www.definit.co.uk/2013/02/fixing-the-the-server-fault-invalidargument-had-no-message-error-message/</link><pubDate>Tue, 05 Feb 2013 10:55:37 +0000</pubDate><guid>https://www.definit.co.uk/2013/02/fixing-the-the-server-fault-invalidargument-had-no-message-error-message/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;Today while creating new VMs from a template I got the error &amp;ldquo;the server fault invalidargument had no message&amp;rdquo; when editing the VM settings, the settings were modified successfully but the error was present whether a change had been made or not to the settings of the VM.&lt;/p&gt;
&lt;p&gt;A quick search of the web suggested removing said VM from the inventory and re-adding from the datastore, for many this fixed the issue but not for me.&lt;/p&gt;</description></item><item><title>DataStore conflicts with an existing DataStore in the DataCenter ‚Äì Manually disabling Storage I/O Control</title><link>https://www.definit.co.uk/2012/10/datastore-conflicts-with-an-existing-datastore-in-the-datacenter-manually-disabling-storage-io-control/</link><pubDate>Wed, 17 Oct 2012 15:31:01 +0000</pubDate><guid>https://www.definit.co.uk/2012/10/datastore-conflicts-with-an-existing-datastore-in-the-datacenter-manually-disabling-storage-io-control/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;I ran into this issue yesterday while reconnecting hosts in our vCenter Server following a complete reinstall - the reasons for which are a long story, but suffice to say that there were new certificates and the host passwords were encrypted with the old ones.&lt;/p&gt;
&lt;p&gt;The LUNs had been unpresented at the hardware level by the storage team, but had not been unmounted or removed from vCenter. This is &lt;em&gt;&lt;strong&gt;not&lt;/strong&gt;&lt;/em&gt; the way to remove storage - let me re-iterate: &lt;a href="http://blogs.vmware.com/vsphere/2011/11/best-practice-how-to-correctly-remove-a-lun-from-an-esx-host.html" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; remove storage properly
&lt;/a&gt;. Unfortunately in this case the storage was removed badly¬†- doing this¬†can lead to a condition called &amp;ldquo;All Paths Down&amp;rdquo; or APD which is best explained by Cormac Hogan (@vmwarestorage) in the article &lt;a href="http://blogs.vmware.com/vsphere/2011/08/all-path-down-apd-handling-in-50.html" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; Handling the All Paths Down (APD) condition
&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>vSphere HA agent for host [Host‚Äôs Name] has an error in [Cluster‚Äôs Name] in [Datacenter‚Äôs Name]: vSphere HA agent cannot be correctly installed or configured</title><link>https://www.definit.co.uk/2012/08/vsphere-ha-agent-for-host-hosts-name-has-an-error-in-clusters-name-in-datacenters-name-vsphere-ha-agent-cannot-be-correctly-installed-or-configured/</link><pubDate>Fri, 24 Aug 2012 10:23:05 +0000</pubDate><guid>https://www.definit.co.uk/2012/08/vsphere-ha-agent-for-host-hosts-name-has-an-error-in-clusters-name-in-datacenters-name-vsphere-ha-agent-cannot-be-correctly-installed-or-configured/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;Here&amp;rsquo;s a lesson in checking the basics! I added new ESXi 5 host to a cluster today and spent a good couple of hours troubleshooting the error:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;vSphere HA agent for host [Host&amp;rsquo;s Name] has an error in [Cluster&amp;rsquo;s Name] in [Datacenter&amp;rsquo;s Name]: vSphere HA agent cannot be correctly installed or configured &lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;After a few basic checks, migrating the host in and out of the cluster and rebooting, I headed off to google and began troubleshooting.&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;</description></item><item><title>VMware ESXi Maximum paths includes local storage</title><link>https://www.definit.co.uk/2012/08/vmware-esxi-maximum-paths-includes-local-storage/</link><pubDate>Mon, 20 Aug 2012 09:45:16 +0000</pubDate><guid>https://www.definit.co.uk/2012/08/vmware-esxi-maximum-paths-includes-local-storage/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;If you are close to the VMware ESXi storage path limit of 1024 paths per host, you may want to consider the following: &lt;strong&gt;local storage, including CD-ROMs, are counted in your total paths&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Simply because of the size and age¬†of the environment, some of our production clusters have now reached the limit (including local paths) - you see this message in the logs&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[2012-08-20 01:48:52.256 77C3DB90 info &amp;lsquo;ha-eventmgr&amp;rsquo;] Event 2003 : The maximum number of supported paths of 1024 has been reached. Path vmhba3:C0:T4:L0 could not be added.&lt;/p&gt;</description></item><item><title>Upgrading to ESXi 5.0 Update 1 using VMware Update Manager</title><link>https://www.definit.co.uk/2012/07/upgrading-to-esxi-5-0-update-1-using-vmware-update-manager/</link><pubDate>Thu, 19 Jul 2012 15:34:30 +0000</pubDate><guid>https://www.definit.co.uk/2012/07/upgrading-to-esxi-5-0-update-1-using-vmware-update-manager/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;I&amp;rsquo;m currently updating a very small 4-host cluster built for a specific application within our datacentre, the hosts are IBM HS22 blades. Since we have the VMware Update Manager infrastructure in place already, I downloaded the IBM ESXi 5.0 Update 2 ISO and imported it into Update Manager, created a baseline and then applied it to the cluster. I scanned the cluster with the baseline and was issued this warning for each host:&lt;/p&gt;</description></item><item><title>The case of the missing network adaptor: a.k.a Installing additional drivers on ESXi 4.1</title><link>https://www.definit.co.uk/2011/03/the-case-of-the-missing-network-adaptor-a-k-a-installing-additional-drivers-on-esxi-4-1/</link><pubDate>Thu, 03 Mar 2011 14:15:17 +0000</pubDate><guid>https://www.definit.co.uk/2011/03/the-case-of-the-missing-network-adaptor-a-k-a-installing-additional-drivers-on-esxi-4-1/</guid><description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;Recently I installed and configured a client‚Äôs new ESXi host, they‚Äôre a small company and only require a single host. The host in question was an IBM x3650 M3, an excellent workhorse for virtualisation and one of 5 or 6 of the same model that I‚Äôve installed in the last year. In addition to the onboard Broadcom Dual Gigabit NIC, we always install at least a second Intel PCIx Dual Gigabit card for resilience/redundancy/performance.&lt;/p&gt;</description></item><item><title>Configuring Software iSCSI multipathing on ESXi 4.1</title><link>https://www.definit.co.uk/2010/11/configuring-software-iscsi-multipathing-on-esxi-4-1/</link><pubDate>Fri, 12 Nov 2010 16:40:28 +0000</pubDate><guid>https://www.definit.co.uk/2010/11/configuring-software-iscsi-multipathing-on-esxi-4-1/</guid><description>&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/11/VMware3.jpg" alt=""&gt;Recently I had cause to configure iSCSI multipathing on a test ESXi server. The production environment servers use iSCSI HBAs to connect to the back end storage, so multipathing them is a straight-forward setup.&lt;/p&gt;
&lt;p&gt;It‚Äôs good practice to separate VMotion, virtual machine and iSCSI traffic, it also helps you manage those logical and physical connections.&lt;/p&gt;
&lt;p&gt;Connect to your ESXi server using the vSphere Client and select the host. Go to the configuration tab and click ‚ÄúAdd Networking‚Ä¶‚Äù. Select a new VMKernel connection type.&lt;/p&gt;</description></item><item><title>Managing ESXi 4.1 with vMA 4.1 on VMware Workstation</title><link>https://www.definit.co.uk/2010/10/managing-esxi-4-1-with-vma-4-1-on-vmware-workstation/</link><pubDate>Thu, 21 Oct 2010 21:12:00 +0000</pubDate><guid>https://www.definit.co.uk/2010/10/managing-esxi-4-1-with-vma-4-1-on-vmware-workstation/</guid><description>&lt;p&gt;vMA is available as a Virtual Appliance (OVF) from VMware. To install it on VMware Workstation 7, open Workstation and select Import or Export to import a new OVF, the URL for the latest OVF for vMA is on the &lt;!-- raw HTML omitted --&gt;vMA download page&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="https://www.definit.co.uk/images/2010/10/image_thumb.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;As &lt;!-- raw HTML omitted --&gt;per this article on virtualkenneth.com&lt;!-- raw HTML omitted --&gt;, you need to edit the VMX file to change the SCSI card and OS type, otherwise you‚Äôll have a kernel panic on boot.&lt;/p&gt;</description></item><item><title>Creating a Windows Server 2008 Microsoft Cluster Service SQL Active/Passive Cluster on a single ESXi 4.0 Server</title><link>https://www.definit.co.uk/2010/01/creating-a-windows-server-2008-microsoft-cluster-service-sql-activepassive-cluster-on-a-single-esxi-4-0-server/</link><pubDate>Wed, 27 Jan 2010 14:52:01 +0000</pubDate><guid>https://www.definit.co.uk/2010/01/creating-a-windows-server-2008-microsoft-cluster-service-sql-activepassive-cluster-on-a-single-esxi-4-0-server/</guid><description>&lt;h2 id="configuring-the-virtual-environment-and-virtual-machines"&gt;Configuring the Virtual Environment and Virtual Machines &lt;a class="anchor" href="#configuring-the-virtual-environment-and-virtual-machines"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Note ‚Äì this configuration will work for ESXi 4 upwards due to the server 2008 MSCS requirement for persistent SCSI-3 reservations.&lt;/p&gt;
&lt;p&gt;The first step is to create a new vSwitch for the host-only cluster heartbeat network, don‚Äôt assign any network adaptors to the switch as it‚Äôs going to be local only.&lt;/p&gt;
&lt;p&gt;Create a new virtual machine with a single hard disk. For the purposes of this test, I‚Äôve assigned 2 vProcessors, 1GB RAM, 30GB drive for the OS, 1 vNIC in the default vSwitch0.&lt;/p&gt;</description></item><item><title>ESX 3.5 snapshots of disks on different storage are stored with the VM files</title><link>https://www.definit.co.uk/2009/10/esx-3-5-snapshots-of-disks-on-different-storage-are-stored-with-the-vm-files/</link><pubDate>Fri, 02 Oct 2009 16:06:00 +0000</pubDate><guid>https://www.definit.co.uk/2009/10/esx-3-5-snapshots-of-disks-on-different-storage-are-stored-with-the-vm-files/</guid><description>&lt;h2 id="aka-why-not-to-use-snapshots"&gt;A.K.A Why not to use snapshots &lt;a class="anchor" href="#aka-why-not-to-use-snapshots"&gt;
 &lt;i class="fas fa-hashtag"&gt;&lt;/i&gt;
&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;I ran into a slightly confusing problem today - our SQL servers are all created¬†with 4 disks on 4 separate LUNs (System, Swap, SQL Data and SQL Logs). When viewing the server through Virtual Center I couldn&amp;rsquo;t see all of the LUNs, just the System LUN. It&amp;rsquo;s not a major problem as the VM can see the storage, but a little annoying when you have to remember what LUN the disks are on.&lt;/p&gt;</description></item><item><title>Teaming NICs with ESX 3.5 and Cisco Switches in an aggregate.</title><link>https://www.definit.co.uk/2009/09/teaming-nics-with-esx-3-5-and-cisco-switches-in-an-aggregate/</link><pubDate>Wed, 30 Sep 2009 11:24:00 +0000</pubDate><guid>https://www.definit.co.uk/2009/09/teaming-nics-with-esx-3-5-and-cisco-switches-in-an-aggregate/</guid><description>&lt;p&gt;Here&amp;rsquo;s the setup. We have a core switch of 2 Cisco 3750s, connected together for fault tolerance as a single logical switch; we also have several ESX 3.5 hosts with 4 Gigabit Ethernet NICs installed each. The Virtual Machines will¬†all be on VLAN 8 (reserved for internal servers) and the¬†VMKernel will be on VLAN 107 (reserved for VMKernel traffic like VMotion).¬†¬†I want to create a load balanced, fault tolerant aggregate of these four NICs over the Core Switch.&lt;/p&gt;</description></item><item><title>SSH remote console to ESXi server</title><link>https://www.definit.co.uk/2008/12/ssh-remote-console-to-esxi-server/</link><pubDate>Sat, 13 Dec 2008 13:43:00 +0000</pubDate><guid>https://www.definit.co.uk/2008/12/ssh-remote-console-to-esxi-server/</guid><description>&lt;p&gt;¬†&lt;/p&gt;
&lt;p&gt;Having recently installed an ESXi server, I am getting to grips with the management and administration of it, one of the things that I wanted to be able to do was connect to the remote terminal through SSH.&lt;/p&gt;
&lt;p&gt;I downloaded my SSH client of choice, PuTTY, and set about connecting, however the server refused the connection. It seems that SSH is not enabled out of the box for ESXi and you need to go through some steps to get there - I found some &lt;a href="http://www.yellow-bricks.com/2008/08/10/howto-esxi-and-ssh/" target="_blank"&gt;
 &lt;clr-icon shape="pop-out" size="12"&gt;&lt;/clr-icon&gt; helpful hints here
&lt;/a&gt;.These are the steps that I took, based on the advice and some other research.&lt;/p&gt;</description></item><item><title>Moving and resizing a VMWare System Disk</title><link>https://www.definit.co.uk/2007/06/moving-and-resizing-a-vmware-system-disk/</link><pubDate>Tue, 26 Jun 2007 19:42:00 +0000</pubDate><guid>https://www.definit.co.uk/2007/06/moving-and-resizing-a-vmware-system-disk/</guid><description>&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;li&amp;gt;
 &amp;lt;font size=&amp;quot;2&amp;quot;&amp;gt;&amp;amp;nbsp;Next time you boot&amp;amp;nbsp;the Virual Machine, you&amp;amp;rsquo;ll have to re-attach the .vmdk in it&amp;amp;rsquo;s correct location. &amp;lt;/font&amp;gt;
&amp;lt;/li&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;</description></item></channel></rss>
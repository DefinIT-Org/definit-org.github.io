<!doctype html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--><!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if IE 8]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><title>Upgrading PKS with NSX-T from 1.0.x to 1.1 &#183; DefinIT</title><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content="bosh,containers,nsx-t,opsmanager,pivotal,pks,pks 1.0.x,pks 1.1,upgrade,"><meta property="og:title" content="Upgrading PKS with NSX-T from 1.0.x to 1.1  &#183; DefinIT"><meta property="og:site_name" content="DefinIT"><meta property="og:url" content="https://www.definit.co.uk/2018/06/upgrading-pks-with-nsx-t-from-1-0-x-to-1-1/"><meta property="og:locale" content="en-gb"><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:article:published_time" content="2018-06-29T19:31:52Z"><meta property="og:article:modified_time" content="2018-06-29T19:31:52Z"><meta property="og:article:tag" content="bosh"><meta property="og:article:tag" content="containers"><meta property="og:article:tag" content="nsx-t"><meta property="og:article:tag" content="opsmanager"><meta property="og:article:tag" content="pivotal"><meta property="og:article:tag" content="pks"><meta property="og:article:tag" content="pks 1.0.x"><meta property="og:article:tag" content="pks 1.1"><meta property="og:article:tag" content="upgrade"><meta property="og:image" content="https://www.definit.co.uk/images/2018/06/RSLocalFile-80846C91-9468-4917-B1FA-182B82280BBC.png"><meta name=twitter:card content="summary"><meta name=twitter:site content="@sammcgeown"><meta name=twitter:creator content="@sammcgeown"><meta name=twitter:title content="Upgrading PKS with NSX-T from 1.0.x to 1.1"><meta name=twitter:description content><meta name=twitter:url content="https://www.definit.co.uk/2018/06/upgrading-pks-with-nsx-t-from-1-0-x-to-1-1/"><meta name=twitter:domain content="https://www.definit.co.uk"><link rel=canonical href=https://www.definit.co.uk/2018/06/upgrading-pks-with-nsx-t-from-1-0-x-to-1-1/><link rel=apple-touch-icon-precomposed sizes=144x144 href=/touch-icon-144-precomposed.png><link rel=icon href=/images/favicon-16x16.png><meta name=generator content="Hugo 0.80.0"><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js></script><script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><script src=/js/clr-1.0/clr-icons.min.js></script><script src=/js/clr-1.0/custom-elements.min.js></script><link href=/css/clr-1.0/clr-ui-dark.css rel=stylesheet><link href=/css/clr-1.0/clr-icons.min.css rel=stylesheet><link href=/css/definit-clarity.css rel=stylesheet><link href=/css/lightbox.min.css rel=stylesheet></head><body data-ng-app=myapp data-ng-controller=MyController data-ng-mouseleave=MouseLeave($event)><div class=main-container><header class=header-6><div class=branding><a class=navbar-brand-img href=/><img alt src=/images/logos/definit-logo.png>
<span class=title>DefinIT</span></a></div><nav class=header-nav><a class="nav-link nav-text" href=https://www.definit.co.uk/>Home</a>
<a class="nav-link nav-text" href=https://www.definit.co.uk/about/>About</a>
<a class="nav-link nav-text" href=https://www.github.com/sammcgeown>GitHub</a>
<a class="nav-link nav-text" href=https://www.definit.co.uk/index.xml>RSS</a></nav><div class=header-actions><form class=search id=search method=get action=//google.com/search><label for=search_input><input id=search_input type=text name=q placeholder="Search with Google">
<input type=hidden name=as_sitesearch value=https://www.definit.co.uk></label></form></div></header><nav class=subnav><ul class=nav><li class=nav-item><a class=nav-link href=https://www.definit.co.uk/>Home</a></li><li class=nav-item><a class=nav-link href=https://www.definit.co.uk/about/>About</a></li><li class=nav-item><a class=nav-link href=https://www.github.com/sammcgeown>GitHub</a></li><li class=nav-item><a class=nav-link href=https://www.definit.co.uk/index.xml>RSS</a></li></ul></nav><div class=content-container><div class=content-area><h1>UPGRADING PKS WITH NSX-T FROM 1.0.X TO 1.1</h1><div class=metas><span class=clr-card-authors><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 29/6/2018
&#183; Read in about 6 min (1220 words)</div><div class=clr-card-authors>Published under <a href=/category/cloud-native>Cloud Native</a>, <a href=/category/nsx>NSX</a> and <a href=/category/vmware>VMware</a></div><div class=clr-card-authors>Tags:
<a class=clr-tags href=https://www.definit.co.uk/tag/bosh>#bosh</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/containers>#containers</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/nsx-t>#nsx-t</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/opsmanager>#opsmanager</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/pivotal>#pivotal</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/pks>#pks</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/pks-1.0.x>#pks 1.0.x</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/pks-1.1>#pks 1.1</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/upgrade>#upgrade</a></div></span></div><br clear=all><img src=/images/2018/06/RSLocalFile-80846C91-9468-4917-B1FA-182B82280BBC.png class=clr-post-featured-image><p><img style=float:right title=pks.png src=/images/2018/06/pks.png alt=PKS width=147 height=170 border=0>Yesterday, Pivotal Container Service 1.1 dropped and, as it’s something I’ve been actively learning in my lab, I wanted to jump on the upgrade straight away. PKS with NSX-T is a really hot topic right now and I think it’s going to be a big part of the future CNA landscape.</p><p>My Lab PKS 1.0.4 deployment is configured as a &ldquo;NO-NAT with Logical Switch (NSX-T) Topology” as depicted in the diagram below (from the PKS documentation). My setup has these network characteristics:</p><ul><li>PKS control plane (Ops Manager, BOSH Director, and PKS VM) components are using routable IP addresses.</li><li>Kubernetes cluster master and worker nodes are using routable IP addresses.</li><li>The PKS control plane is deployed inside of the NSX-T network. Both the PKS control plane components (VMs) and the Kubernetes Nodes use routable IP addresses.</li></ul><p>I used <a href=https://www.virtuallyghetto.com/2018/03/getting-started-with-vmware-pivotal-container-service-pks-part-1-overview.html>William Lam’s excellent series on PKS with NSX-T</a> to configure a lot of the settings, so I am going to assume a familiarity with that series. If not, I suggest you start there to get a good understanding of how everything is laid out.</p><p><img src=https://www.definit.co.uk/images/2018/06/nonatnsxttopology.png alt></p><h2 id=check-pks-prerequisites>Check PKS Prerequisites</h2><p>Check the Ops Manager version - PKS 1.1 requires Ops Manager 2.1, you can view your current version by accessing the Ops Manager web interface and the version is listed at the bottom. If it&rsquo;s not up to date enough, follow the Ops Manager upgrade documentation.</p><p><img title=opsmanagerversion.png src=/images/2018/06/opsmanagerversion.png alt="Ops Manager version" width=482 height=48 border=0></p><p>If you chose to upgrade deployed k8s nodes as part of the upgrade you will need to make sure you have at least 3 worker nodes and your workloads are spread across the nodes to ensure workloads are available. Check if PKS k8s deployments are correctly sized, and scale if it’s required (it’ll go red under the Status tab if it’s under pressure!)</p><p><img title=checkpksmetrics.png src=/images/2018/06/checkpksmetrics.png alt="Check PKS metrics" width=600 height=150 border=0></p><p><img title=pksunderpressure.png src=/images/2018/06/pksunderpressure.png alt="PKS under pressure" width=600 height=24 border=0></p><h2 id=download-the-binaries>Download the binaries</h2><p>Download the necessary binaries from the <a href=https://network.pivotal.io/products/pivotal-container-service/>Pivotal Container Service page</a> - mine is vSphere. For the PKS and Kubectl API, download the binary for your “PKS Client” platform - I’m using Linux. Also download the updated Stemcell (linked on the right under Release Details), I am using the Ubuntu Trusty for vSphere one.</p><ul><li>pivotal-container-service-1.1.0-build.311.pivotal</li><li>bosh-stemcell-3586.24-vsphere-esxi-ubuntu-trusty-go_agent.tgz</li><li>pks-linux-amd64-1.1.0-build.301</li><li>kubectl-linux-amd64-v1.10.3</li></ul><p><img title=downloadpks.png src=/images/2018/06/downloadpks.png alt="Download PKS" width=598 height=216 border=0></p><h2 id=upgrade-pks-tile>Upgrade PKS Tile</h2><p>From the Ops Manager home page, click on “Import a Product” and select the <code>pivotal-container-service-1.1.0-build.311.pivotal</code> - it’s a 3.7GB file, so it may take a while to update. Once it’s uploaded, click the + symbol to add the updated version to the Installation Dashboard.</p><p><img title=pksadded.png src=/images/2018/06/pksadded.png alt="PKS added" width=600 height=311 border=0></p><p>The Pivotal Container Service tile will turn orange to indicate it has changes, and a link to show that an updated stemcell is required appears. You can click on this link, or the STEMCELL LIBRARY link to upload the new stemcell.</p><p><img title=pksupgraded.png src=/images/2018/06/pksupgraded.png alt="PKS Upgraded" width=600 height=319 border=0></p><p>Click IMPORT STEMCELL and select <code>bosh-stemcell-3586.24-vsphere-esxi-ubuntu-trusty-go_agent.tgz</code> to import the new stemcell</p><p><img title=importstemcell.png src=/images/2018/06/importstemcell.png alt="Import Stemcell" width=601 height=136 border=0></p><p>Finally, apply the stemcell to the new Pivotal Container Service product.</p><p><img title=applystemcell.png src=/images/2018/06/applystemcell.png alt="Apply stemcell" width=600 height=278 border=0></p><h2 id=configure-the-pks-tile>Configure the PKS tile</h2><p>The PKS tile will now be orange, but the changes can’t be applied until some extra configuration is added - click on the tile to open the Settings page</p><p>Under the Networking page, we have to add a certificate for the NSX user, move to an IP Block for the k8s node IP addressing, and add a DNS server configuration.</p><h3 id=generate-a-super-user-principal-identity>Generate a Super User Principal Identity</h3><p>First up, we need create a certificate that will &ldquo;represents a principal identity with superuser permissions that the PKS VM will use to communicate with NSX-T”. Follow the instructions in this document (6.1) <a href=https://docs.vmware.com/en/VMware-Pivotal-Container-Service/1.1/vmware-pks-11/GUID-PKS11-installing-nsx-t.html>https://docs.vmware.com/en/VMware-Pivotal-Container-Service/1.1/vmware-pks-11/GUID-PKS11-installing-nsx-t.html</a>. I ran the following on my pks-client Ubuntu server.</p><p>Firstly, export some variables to use in the commands:</p><pre><code>NSX_MANAGER=&quot;192.168.10.35&quot;
NSX_USER=&quot;admin&quot;
NSX_PASSWORD=‘VMware1!'
PI_NAME=&quot;pks-nsx-t-superuser&quot;
NSX_SUPERUSER_CERT_FILE=&quot;pks-nsx-t-superuser.crt&quot;
NSX_SUPERUSER_KEY_FILE=&quot;pks-nsx-t-superuser.key&quot;
NODE_ID=$(cat /proc/sys/kernel/random/uuid)
</code></pre><p>Now generate a private key and certificate:</p><pre><code>openssl req \
-newkey rsa:2048 \
 -x509 \
 -nodes \
 -keyout &quot;$NSX_SUPERUSER_KEY_FILE&quot; \
 -new \
 -out &quot;$NSX_SUPERUSER_CERT_FILE&quot; \
 -subj /CN=pks-nsx-t-superuser \
 -extensions client_server_ssl \
 -config &amp;lt;(
 cat /etc/ssl/openssl.cnf \
 &amp;lt;(printf '[client_server_ssl]\nextendedKeyUsage = clientAuth\n')
 ) \
 -sha256 \
 -days 730
</code></pre><p>Generating a 2048 bit RSA private key</p><p>………………………………………………………………………………………………………………………….+++</p><p>……………..+++</p><p>writing new private key to &lsquo;pks-nsx-t-superuser.key&rsquo;</p><p>—-</p><p>Create a variable with the certificate API request:</p><pre><code>cert_request=$(cat &amp;lt;&amp;lt;END
{
&quot;display_name&quot;: &quot;$PI_NAME&quot;,
&quot;pem_encoded&quot;: &quot;$(awk '{printf &quot;%s\\n&quot;, $0}' $NSX_SUPERUSER_CERT_FILE)&quot;
}
END)
</code></pre><p>Then POST the request to the NSX API:</p><pre><code>curl -k -X POST \
&quot;https://${NSX_MANAGER}/api/v1/trust-management/certificates?action=import&quot; \
-u &quot;$NSX_USER:$NSX_PASSWORD&quot; \
-H 'content-type: application/json' \
-d &quot;$cert_request&quot;
</code></pre><p>You can validate the certificate is installed in the NSX-T Manager interface under System > Trust > Certificates</p><p><img title=nsxtcertificatetrust.png src=/images/2018/06/nsxtcertificatetrust.png alt="Certificate Trust" width=738 height=487 border=0></p><p>Copy the “id” value from the response of the previous API call and create a variable:</p><pre><code>CERTIFICATE_ID=&quot;a59f9a4f-c18c-49e8-8934-fca545d7ad93&quot;
</code></pre><p>Then create a variable to hold the API call to register the principal:</p><pre><code>pi_request=$(cat &amp;lt;&amp;lt;END
{
&quot;display_name&quot;: &quot;$PI_NAME&quot;,
&quot;name&quot;: &quot;$PI_NAME&quot;,
&quot;permission_group&quot;: &quot;superusers&quot;,
&quot;certificate_id&quot;: &quot;$CERTIFICATE_ID&quot;,
&quot;node_id&quot;: &quot;$NODE_ID&quot;
}
END)
</code></pre><p>And POST the call to NSX-T Manager to create it:</p><pre><code>curl -k -X POST \
&quot;https://${NSX_MANAGER}/api/v1/trust-management/principal-identities&quot; \
-u &quot;$NSX_USER:$NSX_PASSWORD&quot; \
-H 'content-type: application/json' \
-d &quot;$pi_request&quot;
</code></pre><p>Finally, validate the certificate and key by using them to make a simple GET query on the API:</p><pre><code>curl -k -X GET \
&quot;https://${NSX_MANAGER}/api/v1/trust-management/principal-identities&quot; \
--cert $(pwd)/&quot;$NSX_SUPERUSER_CERT_FILE&quot; \
--key $(pwd)/&quot;$NSX_SUPERUSER_KEY_FILE&quot;
</code></pre><h3 id=add-the-certificate-and-key-to-the-pks-tile>Add the Certificate and Key to the PKS Tile</h3><p>Back in Ops Manager, click on the Pivotal Container Service tile and select the Networking settings tab. Paste the contents of the .crt file into the Certificate field, and the .key contents into the Key field.</p><p><img title=pksnetworkingsettings.png src=/images/2018/06/pksnetworkingsettings.png alt="PKS Networking Settings" width=933 height=814 border=0></p><h3 id=configure-the-ip-block-id-nodes-dns-and-nat-mode>Configure the IP Block ID, Nodes DNS, and NAT mode</h3><p>Next, further down the Networking page we need to add an NSX-T IP Block ID for the k8s nodes. If, like me, you followed William Lam’s configuration, part of the Ops Manager/BOSH setup was to configure a “Service Network” for the k8s nodes, on the 10.10.0.0/24 subnet. In PKS 1.0 this Service Network was used to configure the IP addresses for the Kubernetes nodes. In PKS 1.1 the IP Block is used, with the first IP being assigned to the t1 router for the k8s cluster.</p><p>With this configuration (thanks to Francis Guillier for his help to understand):</p><ul><li>k8s clusters deployed with PKS 1.0 will still live on service network (with a scale up event, for instance, new k8s worker nodes will be connected to this service network</li><li>new K8s clusters will be deployed using the Node IP Block (/24 allocated to this cluster)</li></ul><p>In order to complete the upgrade, I needed to create a new IP Block in NSX-T that mirrors the Service Network:</p><p><img title=nsxtipblockid.png src=/images/2018/06/nsxtipblockid.png alt="NSX-T IP Block ID" width=870 height=462 border=0></p><p>Copy/paste the ID from NSX-T into the Nodes IP Block ID, disable the NAT mode checkbox and enter a DNS server IP for the Kubernetes Nodes.</p><p><img title=pksnetworkconfig.png src=/images/2018/06/pksnetworkconfig.png alt="PKS Network Config" width=700 height=618 border=0></p><p>Finally, click Save at the bottom of the page!</p><h3 id=configure-the-ceip-and-telemetry-options>Configure the CEIP and Telemetry Options</h3><p><img title=ceipoptions.png src=/images/2018/06/ceipoptions.png alt="CEIP Options" width=1254 height=598 border=0></p><h3 id=validate-the-errands-configuration>Validate the Errands Configuration</h3><p>Last but not least, validate that the Post-Deploy Errands for NSX-T Validation, and Upgrade all clusters are set to On - this ensures NSX-T is configured correctly, and that all Kubernetes Nodes are upgraded.</p><p><img title=pkserrands.png src=/images/2018/06/pkserrands.png alt="PKS Validation Errands" width=1112 height=903 border=0></p><p>Save the configuration and go back to the Installation Dashboard</p><h2 id=running-the-upgrade>Running the Upgrade</h2><p>From the installation Dashboard, click “Apply changes” to begin the upgrade process!</p><p><img title=opsmanagerapplychagnes.png src=/images/2018/06/opsmanagerapplychagnes.png alt="Ops Manager Apply Changes" width=301 height=264 border=0></p><p>Depending on your environment this can take a while - you can follow along by showing the verbose output on the Applying Changes page</p><p><img title=pksapplyingchanges.png src=/images/2018/06/pksapplyingchanges.png alt="PKS Applying Changes" width=1272 height=739 border=0></p><h2 id=upgrading-the-pks-and-kubectl-clis>Upgrading the PKS and Kubectl CLIs</h2><p>Upgrading the CLIs is simply a case of uploading the binaries, chmod to allow execution, then moving to the correct folder:</p><pre><code>sudo chmod +x pks-linux-amd64-1.1.0-build.301
sudo mv pks-linux-amd64-1.1.0-build.301 /usr/local/bin/pks
sudo chmod +x kubectl-linux-amd64-v1.10.3
sudo mv kubectl-linux-amd64-v1.10.3 /usr/local/bin/kubectl
</code></pre><p>You can then validate the installed version with <code>kubectl version</code></p><h6>Share this post</h6><span class=share-box><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" onclick="window.open(this.href,'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-facebook-official"></i></a><a href="https://twitter.com/intent/tweet?text=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1&url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" onclick="window.open(this.href,'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-twitter"></i></a><a href="https://plus.google.com/share?url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" onclick="window.open(this.href,'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-google-plus"></i></a><a href="http://www.reddit.com/submit?url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" onclick="window.open(this.href,'mywin','left=20,top=20,width=900,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-reddit"></i></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f&title=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1" onclick="window.open(this.href,'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');return false;"><i class="fa fa-linkedin"></i></a><a href="mailto:?subject=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1&body=Check out this site https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" data-proofer-ignore><i class="fa fa-envelope"></i></a></span><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1&url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5.0-4.55 2.04-4.55 4.54.0.36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3.0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35.0 12.92-6.92 12.92-12.93.0-.2.0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.tumblr.com/widgets/share/tool?posttype=link&title=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1&caption=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1&content=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f&canonicalUrl=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f&shareSource=tumblr_share_button" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.5.5v5h5v4h-5V15c0 5 3.5 4.4 6 2.8v4.4c-6.7 3.2-12 0-12-4.2V9.5h-3V6.7c1-.3 2.2-.7 3-1.3.5-.5 1-1.2 1.4-2 .3-.7.6-1.7.7-3h3.8z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f&title=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1&summary=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1&source=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6.0 2.5 1 2.6 2.5.0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f&resubmit=true&title=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div></div></a><a class=resp-sharing-button__link href="mailto:?subject=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1&body=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" target=_self rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div></div></a><a class=resp-sharing-button__link href="whatsapp://send?text=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1%20https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://telegram.me/share/url?text=Upgrading%20PKS%20with%20NSX-T%20from%201.0.x%20to%201.1&url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f06%2fupgrading-pks-with-nsx-t-from-1-0-x-to-1-1%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M.707 8.475C.275 8.64.0 9.508.0 9.508s.284.867.718 1.03l5.09 1.897 1.986 6.38a1.102 1.102.0 001.75.527l2.96-2.41a.405.405.0 01.494-.013l5.34 3.87a1.1 1.1.0 001.046.135 1.1 1.1.0 00.682-.803l3.91-18.795A1.102 1.102.0 0022.5.075L.706 8.475z"/></svg></div></div></a><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")
return;var dsq=document.createElement('script');dsq.async=true;dsq.type='text/javascript';dsq.src='//definit.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><div class="clarity-prev-next col-xs-12 col-sm-12 col-md-12 col-lg-12"><nav class=clarity-page-prev-next><div class=clr-nav-previous><a href=https://www.definit.co.uk/2018/06/vmware-clarity-based-wordpress-theme-v0-1/ title="VMware Clarity based WordPress Theme – v0.1" class="btn btn-sm btn-outline">Previous</a></div><div class=clr-nav-next><a href=https://www.definit.co.uk/2018/07/lab-notes-vcloud-director-9-1-for-service-providers-part-2-postgresql-installation/ title="Lab Notes – vCloud Director 9.1 for Service Providers – Part 2: PostgreSQL Installation" class="btn btn-sm btn-outline">Next</a></div></nav></div></div><div class=content-area></div><nav class="sidenav clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><section class=sidenav-content><section class="nav-group collapsible"><input id=Categories type=checkbox>
<label for=Categories>Categories</label><ul class=nav-list><li><a href=/category/automation class=nav-link>AUTOMATION <span class="badge badge-1">7</span></a></li><li><a href=/category/career class=nav-link>CAREER <span class="badge badge-1">21</span></a></li><li><a href=/category/certification class=nav-link>CERTIFICATION <span class="badge badge-1">2</span></a></li><li><a href=/category/cloud class=nav-link>CLOUD <span class="badge badge-1">8</span></a></li><li><a href=/category/cloud-native class=nav-link>CLOUD-NATIVE <span class="badge badge-1">13</span></a></li><li><a href=/category/community class=nav-link>COMMUNITY <span class="badge badge-1">41</span></a></li><li><a href=/category/development class=nav-link>DEVELOPMENT <span class="badge badge-1">3</span></a></li><li><a href=/category/log-insight class=nav-link>LOG-INSIGHT <span class="badge badge-1">2</span></a></li><li><a href=/category/microsoft class=nav-link>MICROSOFT <span class="badge badge-1">60</span></a></li><li><a href=/category/networking class=nav-link>NETWORKING <span class="badge badge-1">34</span></a></li><li><a href=/category/nsx class=nav-link>NSX <span class="badge badge-1">26</span></a></li><li><a href=/category/powercli class=nav-link>POWERCLI <span class="badge badge-1">4</span></a></li><li><a href=/category/storage class=nav-link>STORAGE <span class="badge badge-1">6</span></a></li><li><a href=/category/vcloud-director class=nav-link>VCLOUD-DIRECTOR <span class="badge badge-1">5</span></a></li><li><a href=/category/vmware class=nav-link>VMWARE <span class="badge badge-1">204</span></a></li><li><a href=/category/vmworld class=nav-link>VMWORLD <span class="badge badge-1">12</span></a></li><li><a href=/category/vrealize-automation class=nav-link>VREALIZE-AUTOMATION <span class="badge badge-1">41</span></a></li><li><a href=/category/vrealize-operations class=nav-link>VREALIZE-OPERATIONS <span class="badge badge-1">71</span></a></li><li><a href=/category/vrealize-orchestrator class=nav-link>VREALIZE-ORCHESTRATOR <span class="badge badge-1">28</span></a></li><li><a href=/category/vsan class=nav-link>VSAN <span class="badge badge-1">4</span></a></li><li><a href=/category/vsphere class=nav-link>VSPHERE <span class="badge badge-1">56</span></a></li><li><a href=/category/webinar class=nav-link>WEBINAR <span class="badge badge-1">17</span></a></li></ul></section><section class="nav-group collapsible"><input id=Tags type=checkbox>
<label for=Tags>Tags (Top 10)</label><ul class=nav-list><li><a href=/tag/vrops class=nav-link>VROPS <span class="badge badge-1">66</span></a></li><li><a href=/tag/vmware class=nav-link>VMWARE <span class="badge badge-1">51</span></a></li><li><a href=/tag/windows class=nav-link>WINDOWS <span class="badge badge-1">38</span></a></li><li><a href=/tag/automation class=nav-link>AUTOMATION <span class="badge badge-1">34</span></a></li><li><a href=/tag/esx-and-esxi class=nav-link>ESX-AND-ESXI <span class="badge badge-1">33</span></a></li><li><a href=/tag/vcenter-server class=nav-link>VCENTER-SERVER <span class="badge badge-1">33</span></a></li><li><a href=/tag/nsx class=nav-link>NSX <span class="badge badge-1">31</span></a></li><li><a href=/tag/vmworld class=nav-link>VMWORLD <span class="badge badge-1">30</span></a></li><li><a href=/tag/vra class=nav-link>VRA <span class="badge badge-1">26</span></a></li><li><a href=/tag/webinar class=nav-link>WEBINAR <span class="badge badge-1">26</span></a></li></section><section class=nav-group><label for=Sponsors>Sponsors</label><ul class=nav-list></ul></section></section></nav></div><script async src="https://www.googletagmanager.com/gtag/js?id=UA-4368767-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-4368767-1');</script><script src=/js/lightbox-plus-jquery.min.js></script></div></body></html>
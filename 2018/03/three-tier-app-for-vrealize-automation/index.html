<!doctype html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--><!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if IE 8]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><title>Three Tier App for vRealize Automation &#183; DefinIT</title><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content="apache,application,Automation,CentOS7,mariadb,mysql,nginx,nsx,vRealize Automation,"><meta property="og:title" content="Three Tier App for vRealize Automation  &#183; DefinIT "><meta property="og:site_name" content="DefinIT"><meta property="og:url" content="https://www.definit.co.uk/2018/03/three-tier-app-for-vrealize-automation/"><meta property="og:locale" content="en-gb"><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:article:published_time" content="2018-03-26T10:37:48Z"><meta property="og:article:modified_time" content="2018-03-26T10:37:48Z"><meta property="og:article:tag" content="apache"><meta property="og:article:tag" content="application"><meta property="og:article:tag" content="Automation"><meta property="og:article:tag" content="CentOS7"><meta property="og:article:tag" content="mariadb"><meta property="og:article:tag" content="mysql"><meta property="og:article:tag" content="nginx"><meta property="og:article:tag" content="nsx"><meta property="og:article:tag" content="vRealize Automation"><meta property="og:image" content="https://www.definit.co.uk/images/2018/03/three-tier-app.png"><meta name=twitter:card content="summary"><meta name=twitter:site content="@sammcgeown"><meta name=twitter:creator content="@sammcgeown"><meta name=twitter:title content="Three Tier App for vRealize Automation"><meta name=twitter:description content><meta name=twitter:url content="https://www.definit.co.uk/2018/03/three-tier-app-for-vrealize-automation/"><meta name=twitter:domain content="https://www.definit.co.uk/"><link rel=canonical href=https://www.definit.co.uk/2018/03/three-tier-app-for-vrealize-automation/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel="shortcut icon" href=/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config content="/browserconfig.xml"><meta name=theme-color content="#ffffff"><meta name=generator content="Hugo 0.152.2"><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js></script><script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><script src=/js/clr-icons.min.js></script><script src=/js/custom-elements.min.js></script><script src=/js/clr-toggle-darkmode.js></script><link id=dark-mode-css disabled href=/css/clr-ui-dark.min.css rel=stylesheet type=text/css as=style><link id=light-mode-css href=/css/clr-ui.min.css rel=stylesheet type=text/css as=style><link href=/css/clr-icons.min.css rel=stylesheet><link href=/css/definit-clarity.css rel=stylesheet><link href=/css/syntax-highlighting.css rel=stylesheet><link href=/css/lightbox.min.css rel=stylesheet></head><body id=body onload='setCurrentTheme("dark")'><clr-main-container class=main-container><header class=header-6><div class=branding><a class=logo-and-title href=/><img class=clr-header-logo alt src=/images/logos/definit-logo.png>
<span class=title>&nbsp;DefinIT</span></a></div><nav class=header-nav><a class="nav-link nav-text" href=https://www.definit.co.uk/ title=Home>Home
</a><a class="nav-link nav-text" href=https://www.definit.co.uk/about/ title=About>About
</a><a class="nav-link nav-text" href=https://www.github.com/sammcgeown title=GitHub>GitHub
</a><a class="nav-link nav-text" href=https://www.definit.co.uk/index.xml title=RSS>RSS</a></nav><div class=header-actions><form class=search id=search method=get action=//google.com/search><label for=search_input><input id=search_input type=text name=q placeholder="Search with Google">
<input type=hidden name=as_sitesearch value=https://www.definit.co.uk/></label></form><a class="nav-link nav-icon" aria-label=theme onclick=toggleThemeMode()><clr-icon shape=moon id=icon-theme-mode title="Toggle theme mode"></clr-icon></a></div></header><div class=content-container><div class=content-area><h1>Three Tier App for vRealize Automation</h1><div class=metas><span class=clr-card-authors><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a></div><div class=clr-card-authors>Published on 26/3/2018 -
Read in about 10 min (2023 words)</div><div class=clr-card-authors>Published under
<a href=/category/nsx>NSX</a>, <a href=/category/vmware>VMware</a>, <a href=/category/vrealize-automation>vRealize Automation</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/apache>#apache</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/application>#application</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/automation>#Automation</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/centos7>#CentOS7</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/mariadb>#mariadb</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/mysql>#mysql</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/nginx>#nginx</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/nsx>#nsx</a>
<a class=clr-tags href=https://www.definit.co.uk/tag/vrealize-automation>#vRealize Automation</a></div></span></div><br clear=all><div class="alert alert-danger" role=alert><div class=alert-items><div class="alert-item static"><div class=alert-icon-wrapper><clr-icon class=alert-icon shape=warning-standard></clr-icon></div><span class=alert-text>This article is now 8 years old! It is highly likely that this information is out of date and the author will have completely forgotten about it. Please take care when following any guidance to ensure you have up-to-date recommendations.</span></div></div></div><img src=/images/2018/03/three-tier-app.png class=clr-post-featured-image><p>One question I’m asked quite a lot is what I use for a 3-tier application when I’m testing things like NSX micro-segmentation with vRealize Automation. The simple answer is that I used to make something up as I went along, deploying components by hand and generally repeating myself a lot. I had some cut/paste commands in my note application that sped things up a little, but nothing that developed. I’ve been meaning to rectify this for a while, and this is the result!</p><p>A lot of this is based on the excellent blog posts published on the VMware HOL blog by Doug Baer. Doug wrote five parts on creating his application on Photon OS and they’re well worth a read (<a href=https://blogs.vmware.com/hol/2017/01/hol-three-tier-application-part-1.html>start at part 1, here</a>). I have changed a few things for my vRA Three Tier App, and some things are the same:</p><ul><li>I’m using CentOS7, as that’s what I see out in the wild with customers (RHEL7) and I am most familiar with</li><li>The app itself is the <a href=https://www.tutorialrepublic.com/php-tutorial/php-mysql-crud-application.php>PHP MySQL CRUD Application from Tutorial Republic</a></li><li>The DB tier uses MariaDB (MySQL) not SQLite</li><li>The App tier is an Apache/PHP server</li><li>The Web tier is still NGINX as a reverse proxy</li><li>I am including NSX on-demand load balancers in my blueprint, but you don’t actually need them for single-VM tiers</li><li>Finally, I want to be able to deploy my 3-tier application using vRA Software Components (though you can also use startup scripts in the customisation spec)</li></ul><p>Based on this, my final application will look something like the image below, with clients connecting to the NSX load balancer on HTTPS/443, multiple NGINX reverse proxy servers communicating with the NSX load balancer on HTTP/8080, which is in front of multiple Apache web servers running the PHP application which all talk to the MySQL databased back end over MySQL/3306.</p><p>When in use, the application looks like this:</p><p>/images/2018/03/2018-03-26_11-48-23.mp4</p><h2 id=centos-7-template>CentOS 7 Template <a class=anchor href=#centos-7-template><i class="fas fa-hashtag"></i></a></h2><p>At the core of my three tier application is the CentOS 7 template, which has been prepared with open-vm-tools and the vRealize Automation Guest Agent (gugent). The installation was completed by following the <a href=https://docs.vmware.com/en/vRealize-Automation/7.3/com.vmware.vra.prepare.use.doc/GUID-530ABF4D-E0EA-4266-BEB2-C507CCCDAA9D.html>Install the Guest Agent on a Linux Reference Machine</a> document. The Guest Agent can be tricky to install, so use the prepare_vra_template.sh script and validate the downloaded IaaS Manager Service Host certificate.</p><p>I also have a software component that performs infrastructure tasks on my CentOS VMs, such as updating when they are first deployed.</p><h2 id=database-server-installer-script>Database Server Installer Script <a class=anchor href=#database-server-installer-script><i class="fas fa-hashtag"></i></a></h2><p>The Database installer script (<a href=https://github.com/sammcgeown/vRA-3-Tier-Application/blob/master/DBServer.sh>DBServer.sh</a>) performs the following tasks:</p><ul><li>Install the mariaDB server</li><li>Generates a secure password for the application to use</li><li>Secures the database installation (equivalent to running the “mysql_secure_installation” script) and root account</li><li>Creates the app database and the app user based on input variables</li><li>Enables remote connections to the database</li><li>Opens the firewall for mysql connections</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># Install the database</span>
</span></span><span class=line><span class=cl>/usr/bin/yum -y install mariadb-server
</span></span><span class=line><span class=cl>/usr/bin/systemctl <span class=nb>enable</span> mariadb.service
</span></span><span class=line><span class=cl>/usr/bin/systemctl start mariadb.service
</span></span><span class=line><span class=cl><span class=c1>## Configure the Database</span>
</span></span><span class=line><span class=cl><span class=nv>mysql_user_password</span><span class=o>=</span><span class=k>$(</span>cat /dev/urandom <span class=p>|</span> tr -dc <span class=s1>&#39;a-zA-Z0-9&#39;</span> <span class=p>|</span> fold -w <span class=m>32</span> <span class=p>|</span> head -n 1<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=c1># Secure the database installation</span>
</span></span><span class=line><span class=cl>/usr/bin/mysqladmin -u root password <span class=s2>&#34;</span><span class=nv>$mysql_root_password</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>/usr/bin/mysql -u root -p<span class=s2>&#34;</span><span class=nv>$mysql_root_password</span><span class=s2>&#34;</span> -e <span class=s2>&#34;UPDATE mysql.user SET Password=PASSWORD(&#39;</span><span class=nv>$mysql_root_password</span><span class=s2>&#39;) WHERE User=&#39;root&#39;&#34;</span>
</span></span><span class=line><span class=cl>/usr/bin/mysql -u root -p<span class=s2>&#34;</span><span class=nv>$mysql_root_password</span><span class=s2>&#34;</span> -e <span class=s2>&#34;DELETE FROM mysql.user WHERE User=&#39;root&#39; AND Host NOT IN (&#39;localhost&#39;, &#39;127.0.0.1&#39;, &#39;::1&#39;)&#34;</span>
</span></span><span class=line><span class=cl>/usr/bin/mysql -u root -p<span class=s2>&#34;</span><span class=nv>$mysql_root_password</span><span class=s2>&#34;</span> -e <span class=s2>&#34;DELETE FROM mysql.user WHERE User=&#39;&#39;&#34;</span>
</span></span><span class=line><span class=cl>/usr/bin/mysql -u root -p<span class=s2>&#34;</span><span class=nv>$mysql_root_password</span><span class=s2>&#34;</span> -e <span class=s2>&#34;DELETE FROM mysql.db WHERE Db=&#39;test&#39; OR Db=&#39;test\_%&#39;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Add the app user and database</span>
</span></span><span class=line><span class=cl>/usr/bin/mysql -u root -p<span class=s2>&#34;</span><span class=nv>$mysql_root_password</span><span class=s2>&#34;</span> -e <span class=s2>&#34;CREATE DATABASE </span><span class=nv>$mysql_app_database</span><span class=s2>;&#34;</span>
</span></span><span class=line><span class=cl>/usr/bin/mysql -u root -p<span class=s2>&#34;</span><span class=nv>$mysql_root_password</span><span class=s2>&#34;</span> -e <span class=s2>&#34;GRANT ALL PRIVILEGES ON </span><span class=nv>$mysql_app_database</span><span class=s2>.* TO &#39;</span><span class=nv>$mysql_user_name</span><span class=s2>&#39;@&#39;%&#39; IDENTIFIED BY &#39;</span><span class=nv>$mysql_user_password</span><span class=s2>&#39;;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Flush privileges</span>
</span></span><span class=line><span class=cl>/usr/bin/mysql -u root -p<span class=s2>&#34;</span><span class=nv>$mysql_root_password</span><span class=s2>&#34;</span> -e <span class=s2>&#34;FLUSH PRIVILEGES&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Enable remote connections</span>
</span></span><span class=line><span class=cl>/usr/bin/echo <span class=s2>&#34;bind-address = </span><span class=nv>$mysql_bind_address</span><span class=s2>&#34;</span> <span class=p>&amp;</span>gt<span class=p>;&amp;</span>gt<span class=p>;</span> /etc/my.cnf
</span></span><span class=line><span class=cl><span class=c1># Open MySQL firewall for remote connections</span>
</span></span><span class=line><span class=cl>/usr/bin/firewall-cmd --zone<span class=o>=</span>public --add-service<span class=o>=</span>mysql --permanent
</span></span><span class=line><span class=cl>/usr/bin/firewall-cmd --reload
</span></span><span class=line><span class=cl>/usr/bin/systemctl restart mariadb.service
</span></span></code></pre></td></tr></table></div></div><h2 id=application-server-installer-script>Application Server Installer Script <a class=anchor href=#application-server-installer-script><i class="fas fa-hashtag"></i></a></h2><p>The Application installer script (<a href=https://github.com/sammcgeown/vRA-3-Tier-Application/blob/master/AppServer.sh>AppServer.sh</a>) performs the following tasks</p><ul><li>Install Apache2, PHP and various PHP libraries required for the application</li><li>Download the App files and place them in the default web server location</li><li>Replace the MySQL connection parameters in the configuration file</li><li>Download the SQL file and create the app database table</li><li>Configure Apache to listen on port 8080</li><li>Open the firewall port</li><li>Configure SELinux to allow the web server to connect to remote databases</li></ul><p>The PHP and SQL files that are downloaded are on <a href=https://github.com/sammcgeown/vRA-3-Tier-Application/tree/master/app>my GitHub repository</a> - I’d always suggest reviewing them before downloading and executing!</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># Install Apache and PHP</span>
</span></span><span class=line><span class=cl>/usr/bin/yum -y install mysql httpd php php-mysqlnd php-common php-gd php-xml php-mbstring php-mcrypt php-xmlrpc unzip wget
</span></span><span class=line><span class=cl><span class=c1># Download and install Demo app</span>
</span></span><span class=line><span class=cl>/usr/bin/wget -O /var/www/html/config.php https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/config.php
</span></span><span class=line><span class=cl>/usr/bin/wget -O /var/www/html/create.php https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/create.php
</span></span><span class=line><span class=cl>/usr/bin/wget -O /var/www/html/delete.php https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/delete.php
</span></span><span class=line><span class=cl>/usr/bin/wget -O /var/www/html/error.php https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/error.php
</span></span><span class=line><span class=cl>/usr/bin/wget -O /var/www/html/index.php https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/index.php
</span></span><span class=line><span class=cl>/usr/bin/wget -O /var/www/html/read.php https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/read.php
</span></span><span class=line><span class=cl>/usr/bin/wget -O /var/www/html/update.php https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/update.php
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;s@DBName@</span><span class=nv>$demo_app_mysql_database</span><span class=s2>@&#34;</span> /var/www/html/config.php
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;s@DBUser@</span><span class=nv>$demo_app_mysql_user</span><span class=s2>@&#34;</span> /var/www/html/config.php
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;s@DBPassword@</span><span class=nv>$demo_app_mysql_password</span><span class=s2>@&#34;</span> /var/www/html/config.php
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;s@DBServer@</span><span class=nv>$demo_app_mysql_server</span><span class=s2>@&#34;</span> /var/www/html/config.php
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;s@HOSTNAME@</span><span class=nv>$hostname</span><span class=s2>@&#34;</span> /var/www/html/index.php
</span></span><span class=line><span class=cl>/usr/bin/wget -O /tmp/employees.sql https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/employees.sql
</span></span><span class=line><span class=cl>/usr/bin/mysql -u <span class=s2>&#34;</span><span class=nv>$demo_app_mysql_user</span><span class=s2>&#34;</span> -p<span class=s2>&#34;</span><span class=nv>$demo_app_mysql_password</span><span class=s2>&#34;</span> demo -h <span class=nv>$demo_app_mysql_server</span> <span class=p>&amp;</span>lt<span class=p>;</span> /tmp/employees.sql
</span></span><span class=line><span class=cl><span class=c1># Configure and start Apache</span>
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;/^&amp;lt;Directory \&#34;\/var\/www\/html\&#34;&amp;gt;/,/^&amp;lt;\/Directory&amp;gt;/{s/AllowOverride None/AllowOverride All/g}&#34;</span> /etc/httpd/conf/httpd.conf
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;s@Listen 80@Listen 8080@&#34;</span> /etc/httpd/conf/httpd.conf
</span></span><span class=line><span class=cl>/usr/bin/systemctl <span class=nb>enable</span> httpd.service
</span></span><span class=line><span class=cl>/usr/bin/systemctl start httpd.service
</span></span><span class=line><span class=cl><span class=c1># Open http firewall for remote connections</span>
</span></span><span class=line><span class=cl>/usr/bin/firewall-cmd --permanent --zone<span class=o>=</span>public --add-port<span class=o>=</span>8080/tcp
</span></span><span class=line><span class=cl>/usr/bin/firewall-cmd --reload
</span></span><span class=line><span class=cl><span class=c1># Configure SELinux to allow remote DB connection</span>
</span></span><span class=line><span class=cl>/usr/sbin/setsebool httpd_can_network_connect_db on -P
</span></span></code></pre></td></tr></table></div></div><h2 id=web-server-installer-script>Web Server Installer Script <a class=anchor href=#web-server-installer-script><i class="fas fa-hashtag"></i></a></h2><p>The Web installer script (WebServer.sh) performs the following tasks</p><ul><li>Install the EPEL repository</li><li>Install NGINX</li><li>Download and configure the proxy configuration for NGINX</li><li>Download the SSL configuration and create an SSL certificate</li><li>Open the firewall port</li><li>Configure SELinux to allow the web server to connect to remote servers</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># Add epel-release</span>
</span></span><span class=line><span class=cl>/usr/bin/yum -y install epel-release
</span></span><span class=line><span class=cl><span class=c1># Install nginx</span>
</span></span><span class=line><span class=cl>/usr/bin/yum -y install nginx
</span></span><span class=line><span class=cl><span class=c1># Download the reverse proxy configuration</span>
</span></span><span class=line><span class=cl>/usr/bin/wget -O /etc/nginx/conf.d/proxy.conf https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/proxy.nginx.conf
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;s@SERVERNAME@</span><span class=nv>$web_server_name</span><span class=s2>@&#34;</span> /etc/nginx/conf.d/proxy.conf
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;s@APPTIER@</span><span class=nv>$app_server_name</span><span class=s2>@&#34;</span> /etc/nginx/conf.d/proxy.conf
</span></span><span class=line><span class=cl><span class=c1># Create the SSL folder</span>
</span></span><span class=line><span class=cl>/usr/bin/mkdir /etc/nginx/ssl
</span></span><span class=line><span class=cl><span class=c1># Download the proxy SSL conf</span>
</span></span><span class=line><span class=cl>/usr/bin/wget -O /etc/nginx/ssl/proxy.conf https://raw.githubusercontent.com/sammcgeown/vRA-3-Tier-Application/master/app/proxy.ssl.conf
</span></span><span class=line><span class=cl>/usr/bin/sed -i <span class=s2>&#34;s@WEBSERVERNAME@</span><span class=nv>$web_server_name</span><span class=s2>@&#34;</span> /etc/nginx/ssl/proxy.conf
</span></span><span class=line><span class=cl><span class=c1># Generate SSL keys</span>
</span></span><span class=line><span class=cl>/usr/bin/openssl req -x509 -nodes -days <span class=m>1825</span> -newkey rsa:2048 -keyout /etc/nginx/ssl/proxy.key -out /etc/nginx/ssl/proxy.pem -config /etc/nginx/ssl/proxy.conf
</span></span><span class=line><span class=cl><span class=c1># Open http firewall for remote connections</span>
</span></span><span class=line><span class=cl>/usr/bin/firewall-cmd --permanent --zone<span class=o>=</span>public --add-service<span class=o>=</span>https
</span></span><span class=line><span class=cl>/usr/bin/firewall-cmd --reload
</span></span><span class=line><span class=cl><span class=c1># Configure SELinux</span>
</span></span><span class=line><span class=cl>/usr/sbin/setsebool -P httpd_can_network_connect <span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=c1># Start and enable nginx</span>
</span></span><span class=line><span class=cl>/usr/bin/systemctl start nginx
</span></span><span class=line><span class=cl>/usr/bin/systemctl <span class=nb>enable</span> nginx
</span></span></code></pre></td></tr></table></div></div><p>The two configuration files that are downloaded are available from <a href=https://github.com/sammcgeown/vRA-3-Tier-Application/tree/master/config>my GitHub repository</a>, one is a configuration file for the NGINX reverse proxy, which is placed in the /etc/nginx/conf.d folder. I don’t make any changes to the default NGINX configuration.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>server <span class=o>{</span>
</span></span><span class=line><span class=cl>      listen 443<span class=p>;</span>
</span></span><span class=line><span class=cl>      server_name SERVERNAME<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      ssl on<span class=p>;</span>
</span></span><span class=line><span class=cl>      ssl_certificate     /etc/nginx/ssl/proxy.pem<span class=p>;</span>
</span></span><span class=line><span class=cl>      ssl_certificate_key /etc/nginx/ssl/proxy.key<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      ssl_session_cache shared:SSL:1m<span class=p>;</span>
</span></span><span class=line><span class=cl>      ssl_session_timeout 2m<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      location / <span class=o>{</span>
</span></span><span class=line><span class=cl>         proxy_pass http://APPTIER:8080<span class=p>;</span>
</span></span><span class=line><span class=cl>         proxy_set_header Host <span class=nv>$host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         proxy_redirect off<span class=p>;</span>
</span></span><span class=line><span class=cl>         proxy_set_header X-Real-IP <span class=nv>$remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         proxy_set_header X-Forwarded-For <span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         proxy_set_header X-Forwarded-Proto https<span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>The second configuration file is a template for openSSL to generate an SSL certificate for the NGINX reverse proxy.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>req<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>distinguished_name</span> <span class=o>=</span> req_distinguished_name
</span></span><span class=line><span class=cl><span class=nv>x509_extensions</span> <span class=o>=</span> v3_req
</span></span><span class=line><span class=cl><span class=nv>default_md</span> <span class=o>=</span> sha256
</span></span><span class=line><span class=cl><span class=nv>prompt</span> <span class=o>=</span> no
</span></span><span class=line><span class=cl><span class=o>[</span>req_distinguished_name<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>C</span> <span class=o>=</span> GB
</span></span><span class=line><span class=cl><span class=nv>ST</span> <span class=o>=</span> West Sussex
</span></span><span class=line><span class=cl><span class=nv>L</span> <span class=o>=</span> Horsham
</span></span><span class=line><span class=cl><span class=nv>O</span> <span class=o>=</span> DefinIT
</span></span><span class=line><span class=cl><span class=nv>OU</span> <span class=o>=</span> Lab
</span></span><span class=line><span class=cl><span class=nv>CN</span> <span class=o>=</span> WEBSERVERNAME
</span></span><span class=line><span class=cl><span class=o>[</span>v3_req<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>keyUsage</span> <span class=o>=</span> keyEncipherment, dataEncipherment
</span></span><span class=line><span class=cl><span class=nv>extendedKeyUsage</span> <span class=o>=</span> serverAuth
</span></span><span class=line><span class=cl><span class=nv>subjectAltName</span> <span class=o>=</span> @alt_names
</span></span><span class=line><span class=cl><span class=o>[</span>alt_names<span class=o>]</span>
</span></span><span class=line><span class=cl>DNS.1 <span class=o>=</span> WEBSERVERNAME
</span></span></code></pre></td></tr></table></div></div><h2 id=creating-the-vrealize-automation-software-components>Creating the vRealize Automation Software Components <a class=anchor href=#creating-the-vrealize-automation-software-components><i class="fas fa-hashtag"></i></a></h2><p>The next step is to create three Software Components, one for each tier of the application.</p><h3 id=demo-app-database>Demo App Database <a class=anchor href=#demo-app-database><i class="fas fa-hashtag"></i></a></h3><p>The Database Script has five properties, four of which will be inputs for the end user, one of which is computed.</p><ul><li><strong>mysql_app_database</strong> - the name of the MySQL database to create</li><li><strong>mysql_root_password</strong> - the password to set for the MySQL root user</li><li><strong>mysql_bind_address</strong> - the address MySQL should listen on (this is bound to the database server’s IP in the blueprint later)</li><li><strong>mysql_user_password</strong> - this is set as a Computed Value because the script auto-generates a password. Setting it to a Computed Value lets us bind to the property later in the blueprint to pass to other components)</li><li><strong>mysql_user_name</strong> - the name of the MySQL user to be created for the app</li></ul><h3 id=demo-app-application>Demo App Application <a class=anchor href=#demo-app-application><i class="fas fa-hashtag"></i></a></h3><p>The application tier install component has four inputs, which will be directly mapped to the properties for the database component</p><ul><li><strong>demo_app_mysql_server</strong> - the IP address of the MySQL database server</li><li><strong>demo_app_mysql_user</strong> - the MySQL user created for the application</li><li><strong>demp_app_mysql_password</strong> - the generated password for the MySQL user</li><li><strong>demo_app_mysql_database</strong> - the name of the MySQL databsae</li></ul><h3 id=demo-app-web>Demo App Web <a class=anchor href=#demo-app-web><i class="fas fa-hashtag"></i></a></h3><p>The web tier install component has two inputs for the script, which can be either mapped to the tier server IP addresses (for single node deploys) or to the load balancer IP addresses (for multi-node deploys).</p><ul><li><strong>web_server_name</strong> - the name or IP of the web tier (server or load balancer)</li><li><strong>app_server_name</strong> - the DNS name or IP of the app tier (server or load balancer)</li></ul><h2 id=creating-the-vrealize-automation-blueprints>Creating the vRealize Automation Blueprints <a class=anchor href=#creating-the-vrealize-automation-blueprints><i class="fas fa-hashtag"></i></a></h2><p>Now that all of the building blocks are in place, I can create the Blueprints that will tie it all together.</p><p>For the multi-node deployment, the blueprint looks like this (running from left to right):</p><ul><li><p>An on-demand routed network (though any network will be fine)</p></li><li><p><strong>web_tier_lb</strong> - an on-demand load balancer to front the web_tier</p></li><li><p><strong>web_tier</strong> - a vSphere Machine using my CentOS7 template, configured as 1-3 VMs</p></li><li><p><strong>CentOS7_OS_Config</strong> - configures and updates my template, not strictly required!</p></li><li><p><strong>Demo_App_Web</strong> - the Demo App Web software component</p></li><li><p><strong>app_tier_lb</strong> - another on-demand load balancer to front the app_tier</p></li><li><p><strong>app_tier</strong> - a vSphere Machine using my CentOS7 template, configured as 1-3 VMs</p></li><li><p><strong>CentOS7_OS_Config</strong> - configures and updates my template, not strictly required!</p></li><li><p><strong>Demo_App_Application</strong> - the Demo App Application software component</p></li><li><p><strong>db_tier</strong> - a vSphere Machine using my CentOS7 template, configured as 1 VM only</p></li><li><p><strong>CentOS7_OS_Config</strong> - configures and updates my template, not strictly required!</p></li><li><p><strong>Demo_App_Database</strong> - the Demo App Database software component</p></li></ul><p>Note the lines depicting build dependencies - the Web depends on the App, which depends on the DB.</p><p>The custom property mapping for the database tier lets the user specify the database name, root password and app user name in the request (Show in Request, Overridable) while providing some default values. The MySQL bind address is bound to the <em>_resource<del>db_tier</del>ip_address</em> property, which will be the IP address vRA assigns to the database server.</p><p>All of the custom properties for the application tier are bound to property values from the database tier, so that the PHP file is updated with the database server configuration (server, database, user and password). These properties are hidden from the user as they’re bound.</p><p>The two inputs for the web tier custom properties are mapped to the load balancer IP addresses for the web and app tier load balancers.</p><p>To create a single-node blueprint of the application there’s only one difference - the web tier properties are mapped directly to the web_tier and app_tier IP addresses.</p><h2 id=deploying-and-testing-the-three-tier-demo-app>Deploying and testing the three tier Demo App <a class=anchor href=#deploying-and-testing-the-three-tier-demo-app><i class="fas fa-hashtag"></i></a></h2><p>Once the blueprint has been published and assigned to a catalog, service and entitlement, it’s time to deploy and test the app! Below you can see the deployment form, and the configuration of the database install script.</p><p>The deployed blueprint looks something like this - you can see that the web tier load balancer has an IP address of 10.0.0.210.</p><p>And when I hit the load balancer IP, the application loads!</p><h2 id=and-finally8230>And finally… <a class=anchor href=#and-finally8230><i class="fas fa-hashtag"></i></a></h2><p>All of the vRA components have been exported using CloudClient and are also on the GitHub repo if you want to import them. Since this post is getting pretty long, I’ll draw it to a close here - hopefully this is of some use to you - please feel free to leave me a comment or ping me on twitter if you have any questions!</p><h6>Share this post</h6><span class=share-box><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" onclick='return window.open(this.href,"mywin","left=20,top=20,width=500,height=500,toolbar=1,resizable=0"),!1'><i class="fa fa-facebook-official"></i></a>
<a href="https://twitter.com/intent/tweet?text=Three%20Tier%20App%20for%20vRealize%20Automation&amp;url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" onclick='return window.open(this.href,"mywin","left=20,top=20,width=500,height=500,toolbar=1,resizable=0"),!1'><i class="fa fa-twitter"></i></a>
<a href="https://plus.google.com/share?url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" onclick='return window.open(this.href,"mywin","left=20,top=20,width=500,height=500,toolbar=1,resizable=0"),!1'><i class="fa fa-google-plus"></i></a>
<a href="http://www.reddit.com/submit?url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" onclick='return window.open(this.href,"mywin","left=20,top=20,width=900,height=500,toolbar=1,resizable=0"),!1'><i class="fa fa-reddit"></i></a>
<a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f&amp;title=Three%20Tier%20App%20for%20vRealize%20Automation" onclick='return window.open(this.href,"mywin","left=20,top=20,width=500,height=500,toolbar=1,resizable=0"),!1'><i class="fa fa-linkedin"></i></a>
<a href="mailto:?subject=Three%20Tier%20App%20for%20vRealize%20Automation&amp;body=Check out this site https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" data-proofer-ignore><i class="fa fa-envelope"></i></a>
</span><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=Three%20Tier%20App%20for%20vRealize%20Automation&amp;url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5.0-4.55 2.04-4.55 4.54.0.36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3.0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35.0 12.92-6.92 12.92-12.93.0-.2.0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.tumblr.com/widgets/share/tool?posttype=link&amp;title=Three%20Tier%20App%20for%20vRealize%20Automation&amp;caption=Three%20Tier%20App%20for%20vRealize%20Automation&amp;content=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f&amp;canonicalUrl=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f&amp;shareSource=tumblr_share_button" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg viewBox="0 0 24 24"><path d="M13.5.5v5h5v4h-5V15c0 5 3.5 4.4 6 2.8v4.4c-6.7 3.2-12 0-12-4.2V9.5h-3V6.7c1-.3 2.2-.7 3-1.3.5-.5 1-1.2 1.4-2 .3-.7.6-1.7.7-3h3.8z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f&amp;title=Three%20Tier%20App%20for%20vRealize%20Automation&amp;summary=Three%20Tier%20App%20for%20vRealize%20Automation&amp;source=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6.0 2.5 1 2.6 2.5.0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f&amp;resubmit=true&amp;title=Three%20Tier%20App%20for%20vRealize%20Automation" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div></div></a><a class=resp-sharing-button__link href="mailto:?subject=Three%20Tier%20App%20for%20vRealize%20Automation&amp;body=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" target=_self rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div></div></a><a class=resp-sharing-button__link href="whatsapp://send?text=Three%20Tier%20App%20for%20vRealize%20Automation%20https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://telegram.me/share/url?text=Three%20Tier%20App%20for%20vRealize%20Automation&amp;url=https%3a%2f%2fwww.definit.co.uk%2f2018%2f03%2fthree-tier-app-for-vrealize-automation%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg viewBox="0 0 24 24"><path d="M.707 8.475C.275 8.64.0 9.508.0 9.508s.284.867.718 1.03l5.09 1.897 1.986 6.38a1.102 1.102.0 001.75.527l2.96-2.41a.405.405.0 01.494-.013l5.34 3.87a1.1 1.1.0 001.046.135 1.1 1.1.0 00.682-.803l3.91-18.795A1.102 1.102.0 0022.5.075L.706 8.475z"/></svg></div></div></a><div class="clarity-prev-next col-xs-12 col-sm-12 col-md-12 col-lg-12"><nav class=clarity-page-prev-next><div class=clr-nav-previous><a href=https://www.definit.co.uk/2018/02/retrieve-blueprint-or-virtual-machine-custom-properties-using-the-vrealize-automation-api/ title="Retrieve Blueprint or Virtual Machine Custom Properties using the vRealize Automation API" class="btn btn-sm btn-outline">Previous</a></div><div class=clr-nav-next><a href=https://www.definit.co.uk/2018/04/vrops-6-7-automate-all-the-things/ title="#vROps 6.7 – Automate all the things.." class="btn btn-sm btn-outline">Next</a></div></nav></div></div><clr-vertical-nav class="clr-vertical-nav has-nav-groups"><div class=nav-content><section class=sidenav-content><clr-vertical-nav-group class=nav-group><div class=nav-group-content><button type=button class=nav-group-trigger aria-expanded=false aria-label="Toggle vertical navigation group" onclick='toggleNavigation("categories")'><div class=nav-group-text>Categories</div><clr-icon shape=angle class=nav-group-trigger-icon id=icon-categories dir=down title=Collapse></clr-icon></button></div><div id=section-categories class=nav-group-children><clr-vertical-nav-group-children><a class=nav-link href=https://www.definit.co.uk/category/career/><span class=nav-text>career <span class="badge badge-1">28</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/cloud-native/><span class=nav-text>cloud-native <span class="badge badge-1">17</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/community/><span class=nav-text>community <span class="badge badge-1">46</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/microsoft/><span class=nav-text>microsoft <span class="badge badge-1">60</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/networking/><span class=nav-text>networking <span class="badge badge-1">29</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/nsx/><span class=nav-text>nsx <span class="badge badge-1">16</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/vcf/><span class=nav-text>vcf <span class="badge badge-1">2</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/vmware/><span class=nav-text>vmware <span class="badge badge-1">206</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/vmware-aria/><span class=nav-text>vmware aria <span class="badge badge-1">1</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/vmware-multi-cloud/><span class=nav-text>vmware multi-cloud <span class="badge badge-1">1</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/vrealize-automation/><span class=nav-text>vrealize automation <span class="badge badge-1">40</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/vrealize-operations/><span class=nav-text>vrealize operations <span class="badge badge-1">71</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/vrealize-orchestrator/><span class=nav-text>vrealize orchestrator <span class="badge badge-1">23</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/category/vsphere/><span class=nav-text>vsphere <span class="badge badge-1">56</span></span></a></clr-vertical-nav-group-children></div></clr-vertical-nav-group><div class=nav-divider></div><clr-vertical-nav-group class=nav-group><div class=nav-group-content><button type=button class=nav-group-trigger aria-expanded=false aria-label="Toggle vertical navigation group" onclick='toggleNavigation("tags")'><div class=nav-group-text>Tags (Top 10)</div><clr-icon shape=angle class=nav-group-trigger-icon id=icon-tags dir=down title=Collapse></clr-icon></button></div><div id=section-tags class=nav-group-children><clr-vertical-nav-group-children><a class=nav-link href=https://www.definit.co.uk/tag/vrops/><span class=nav-text>vrops <span class="badge badge-1">68</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/tag/vmware/><span class=nav-text>vmware <span class="badge badge-1">57</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/tag/nsx/><span class=nav-text>nsx <span class="badge badge-1">41</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/tag/automation/><span class=nav-text>automation <span class="badge badge-1">40</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/tag/windows/><span class=nav-text>windows <span class="badge badge-1">38</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/tag/vmworld/><span class=nav-text>vmworld <span class="badge badge-1">34</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/tag/esx-and-esxi/><span class=nav-text>esx and esxi <span class="badge badge-1">33</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/tag/vcenter-server/><span class=nav-text>vcenter server <span class="badge badge-1">33</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/tag/vra/><span class=nav-text>vra <span class="badge badge-1">30</span></span>
</a><a class=nav-link href=https://www.definit.co.uk/tag/webinar/><span class=nav-text>webinar <span class="badge badge-1">29</span></span></a></clr-vertical-nav-group-children></div></clr-vertical-nav-group><div class=nav-divider></div></section></div></clr-vertical-nav><script lang=javascript>function toggleNavigation(e){var t=document.getElementById("section-"+e),n=document.getElementById("icon-"+e);t.style.display==="none"?(t.style.display="block",n.dir="down"):(t.style.display="none",n.dir="right")}</script></div><script async src="https://www.googletagmanager.com/gtag/js?id=UA-4368767-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-4368767-1")</script><script src=/js/lightbox-plus-jquery.min.js></script></clr-main-container></body></html>
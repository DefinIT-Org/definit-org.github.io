<!doctype html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--><!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if IE 8]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><title>DefinIT</title><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta property="og:title" content="DefinIT "><meta property="og:site_name" content="DefinIT"><meta property="og:url" content="https://www.definit.co.uk/"><meta property="og:locale" content="en-gb"><meta property="og:type" content="website"><link rel=alternate type=application/rss+xml href=https://www.definit.co.uk/index.xml title=DefinIT><link rel=canonical href=https://www.definit.co.uk/><link rel=apple-touch-icon-precomposed sizes=144x144 href=/touch-icon-144-precomposed.png><link rel=icon href=/images/favicon-16x16.png><meta name=generator content="Hugo 0.107.0"><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js></script>
<script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><script src=/js/clr-icons.min.js></script>
<script src=/js/custom-elements.min.js></script>
<link href=/css/clr-ui.min.css rel=stylesheet><link href=/css/clr-icons.min.css rel=stylesheet><link href=/css/definit-clarity.css rel=stylesheet><link href=/css/lightbox.min.css rel=stylesheet></head><body id=body data-ng-app=myapp data-ng-controller=MyController data-ng-mouseleave=MouseLeave($event)><clr-main-container class=main-container><header class=header-6><div class=branding><a class=navbar-brand-img href=/><img alt src=/images/logos/definit-logo.png>
<span class=title>DefinIT</span></a></div><nav class=header-nav><a class="nav-link nav-text" href=https://www.definit.co.uk/ title=Home>Home</a>
<a class="nav-link nav-text" href=https://www.definit.co.uk/about/ title=About>About</a>
<a class="nav-link nav-text" href=https://www.github.com/sammcgeown title=GitHub>GitHub</a>
<a class="nav-link nav-text" href=https://www.definit.co.uk/index.xml title=RSS>RSS</a></nav><div class=header-actions><form class=search id=search method=get action=//google.com/search><label for=search_input><input id=search_input type=text name=q placeholder="Search with Google">
<input type=hidden name=as_sitesearch value=https://www.definit.co.uk></label></form></div></header><div class=content-container><div class="content-area col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><div class=clr-row><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2012/08/vmware-esxi-maximum-paths-includes-local-storage/>VMware ESXi Maximum paths includes local storage</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 20/8/2012</div><div class=clr-card-authors>Published under <a href=/category/vmware>VMware</a> and <a href=/category/vsphere>vSphere</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden>If you are close to the VMware ESXi storage path limit of 1024 paths per host, you may want to consider the following: local storage, including CD-ROMs, are counted in your total paths.
Simply because of the size and ageÂ of the environment, some of our production clusters have now reached the limit (including local paths) - you see this message in the logs
[2012-08-20 01:48:52.256 77C3DB90 info &lsquo;ha-eventmgr&rsquo;] Event 2003 : The maximum number of supported paths of 1024 has been reached.</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2012/08/vmware-esxi-maximum-paths-includes-local-storage/>More</a></div></div></div><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2012/07/upgrading-to-esxi-5-0-update-1-using-vmware-update-manager/>Upgrading to ESXi 5.0 Update 1 using VMware Update Manager</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 19/7/2012</div><div class=clr-card-authors>Published under <a href=/category/vmware>VMware</a> and <a href=/category/vsphere>vSphere</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden>I&rsquo;m currently updating a very small 4-host cluster built for a specific application within our datacentre, the hosts are IBM HS22 blades. Since we have the VMware Update Manager infrastructure in place already, I downloaded the IBM ESXi 5.0 Update 2 ISO and imported it into Update Manager, created a baseline and then applied it to the cluster. I scanned the cluster with the baseline and was issued this warning for each host:</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2012/07/upgrading-to-esxi-5-0-update-1-using-vmware-update-manager/>More</a></div></div></div><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2012/06/installing-a-tmg-enterprise-management-server-and-migrating-and-existing-standalone-array-part-1/>Installing a TMG Enterprise Management Server and Migrating and Existing Standalone Array: Part 1</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 12/6/2012</div><div class=clr-card-authors>Published under <a href=/category/microsoft>Microsoft</a> and <a href=/category/networking>Networking</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden>This is my current scenario: there are two existing servers in a stand-alone array - TMG01 and TMG02, and over in a DR site there is a new server (TMG03) that is in the process of being built. To comply with DR, all 3 servers must have their configurations up to date, however there is no direct communication allowed between the two DMZs, so simply adding to the new server as anÂ array member is not possible.</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2012/06/installing-a-tmg-enterprise-management-server-and-migrating-and-existing-standalone-array-part-1/>More</a></div></div></div><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2012/05/scom-2007-r2-daily-health-check-script-v2/>SCOM 2007 R2: Daily Health Check Script v2</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 28/5/2012</div><div class=clr-card-authors>Published under <a href=/category/microsoft>Microsoft</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden>A couple of months agoÂ I posted the first version of my SCOM 2007 R2 Daily Health Check Script - here is version 2. It&rsquo;s more than a little motivated by some friendly competition with a Microsoft PFE for SCOM, hopefully you&rsquo;ll agree it&rsquo;s a big improvement on the last version.
Updated for this version
Formatting changed to make it more readable and more compatible Added &ldquo;Report generated on &rdquo; to the top of the report Management Server states reported as one section Default MP check moved to beneathÂ the Management servers Agents in pending states moved to be with the Agent health states Clarified &ldquo;Unresponsive Agents&rdquo; and &ldquo;Agents reporting errors&rdquo; Management server alerts streamlined Added top 10 alerts for the last 7 days, and added top alerters for each I&rsquo;m planning to wrap in some SQL database size checks and some of the other recommendations later - I&rsquo;ll post again here when that&rsquo;s ready ðŸ™‚</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2012/05/scom-2007-r2-daily-health-check-script-v2/>More</a></div></div></div><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2012/02/powershell-recursively-taking-ownership-of-files-and-folders-and-adding-permissions-without-removing-existing-permissions/>PowerShell: Recursively taking ownership of files and folders and adding permissions without removing existing permissions</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 7/2/2012</div><div class=clr-card-authors>Published under <a href=/category/microsoft>Microsoft</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden><img src=/images/2012/02/powershell1.png class=clr-card-featured-image>
This is every file server admin&rsquo;s nightmare: hundreds of shares, thousands of folders, hundreds of thousands of files - and custom or not inherited rights on many of them. Terabytes of data that need auditing - e.g. to find customer data, or credit card information. How do you go about accessing all the data in all the trees? What about backups failing because someone removed the System account? Of course you can seize control of the folder by taking ownership and pushing down from a top level - but how do you preserve the existing Access Control Lists?</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2012/02/powershell-recursively-taking-ownership-of-files-and-folders-and-adding-permissions-without-removing-existing-permissions/>More</a></div></div></div><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2012/01/scom-2007-r2-daily-health-check-script/>SCOM 2007 R2: Daily Health Check Script</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 25/1/2012</div><div class=clr-card-authors>Published under <a href=/category/microsoft>Microsoft</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden>An updated version of this script has been released: https://www.definit.co.uk/2012/05/scom-2007-r2-daily-health-check-script-v2/
I&rsquo;ve been working with a Microsft SCOM PFE (Premier Field Engineer) for the last few months and part of the engagement is an environment health check for the SCOM setup. Based on this Microsoft recommend a series of health checks to for the environment that should be carried out every day. This is summarised as the following:
Check the health of all Management Servers and Gateways Check the RMS is not in maintenance mode Review Outstanding Alerts Review Agent&rsquo;s Health Status Review Backup Status Review any Management Group Alerts Review the Pending Management status Review Database Sizes (Operations, Data warehouse, ACS) Review Volume of Alerts Review Alert Latency Document any changesÂ From this, there are certain aspects that can&rsquo;t be automated so easily, orÂ shouldn&rsquo;t beÂ - e.</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2012/01/scom-2007-r2-daily-health-check-script/>More</a></div></div></div><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2012/01/im-running-the-virgin-london-marathon-2012-for-the-lighthouse-group/>Iâ€™m running the Virgin London Marathon 2012 for The Lighthouse Group</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 16/1/2012</div><div class=clr-card-authors>Published under</div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden>This post is nothing more than a shameless request for sponsorship! As the title suggests, I am running the London marathon this year (in 96 days!) for the charity &ldquo;The Lighthouse Group&rdquo;. Check out the TLG site for more detail on what they do, but in a nutshell they are a charity that works with young people who have been excluded from school, at risk of exclusion or are at crisis point in their education.</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2012/01/im-running-the-virgin-london-marathon-2012-for-the-lighthouse-group/>More</a></div></div></div><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2012/01/overriding-the-opsmgr-exchange-2007-test-mapi-connectivity-monitor-for-recovery-storage-groups/>Overriding the OpsMgr Exchange 2007 Test MAPI Connectivity Monitor for Recovery Storage Groups</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 5/1/2012</div><div class=clr-card-authors>Published under <a href=/category/microsoft>Microsoft</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden>The Test MAPI Connectivity monitor for the Exchange 2007 management pack will automatically generate a critical error for any Recovery Storage Groups you have on monitored Exchange Mailbox Roles. As these are generally temporary Storage Groups created for a recovery and then removed, you don&rsquo;t want an alert - but manually adding an override for every time is not a great use of your time either.
The State Change event details are as follows:</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2012/01/overriding-the-opsmgr-exchange-2007-test-mapi-connectivity-monitor-for-recovery-storage-groups/>More</a></div></div></div><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2012/01/troublewithscom2007r2certificates/>Trouble with SCOM 2007 R2 Certificates? Validate the entire PKI path!</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 5/1/2012</div><div class=clr-card-authors>Published under</div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden>I learned something new today: SCOM 2007 R2 certificate based communications not only checks the validity of the certificate you use, but also the CA that issued itâ€¦let me expand:
Like many organisations there is a root CA (we&rsquo;ll call it ROOTCA01), and then a subordinate CA (we&rsquo;ll call that SUBCA01). OPSMGM01 has a certificate to identify itself and has certificates for ROOTCA01 and SUBCA01 in it&rsquo;s Trusted Root Certificate Authorities.</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2012/01/troublewithscom2007r2certificates/>More</a></div></div></div><div class="clr-col-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><div class=card><div class=card-header style=height:74px><a href=https://www.definit.co.uk/2011/10/vmware-powercli-set-path-selection-policy-on-all-luns-for-a-host/>VMware PowerCLI â€“ Set Path Selection Policy on all LUNs for a host</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors><img src=/images/SamMcGeown2020.jpg alt class=img-author>Written by <a href=https://www.definit.co.uk/authors/sam-mcgeown/>Sam McGeown</a>
on 28/10/2011</div><div class=clr-card-authors>Published under <a href=/category/microsoft>Microsoft</a> and <a href=/category/vmware>VMware</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:200px;min-height:200px;overflow:hidden>Just a quick script to set the Path Selection Policy on any LUNs on a host that do not have your target policy enabled. The script sets the server to Maintenance mode first, evacuating any VMs if you are in a full DRS automated environment. While this is not strictly necessary, it was required for my production environment just to be safe.
param( [string] $vCenterServer = $(Read-Host -prompt "Enter vCenter Server Name"</div></div><div class=card-footer><a class=card-link href=https://www.definit.co.uk/2011/10/vmware-powercli-set-path-selection-policy-on-all-luns-for-a-host/>More</a></div></div></div></div><nav><ul class=pagination><li class="pagination__item pagination__item--first"><a class="btn btn-sm btn btn-outline" href=/>1</a></li><li class="pagination__item pagination__item--previous"><a href=/page/33/ class="btn btn-sm btn btn-outline">...</a></li><li class=pagination__item><a href=/page/32/ class="btn btn-sm btn btn-outline">32</a></li><li class=pagination__item><a href=/page/33/ class="btn btn-sm btn btn-outline">33</a></li><li class="pagination__item pagination__item--current"><a href=/page/34/ class="btn btn-sm btn btn-primary">34</a></li><li class=pagination__item><a href=/page/35/ class="btn btn-sm btn btn-outline">35</a></li><li class=pagination__item><a href=/page/36/ class="btn btn-sm btn btn-outline">36</a></li><li class="pagination__item pagination__item--next"><a href=/page/35/ class="btn btn-sm btn-outline">...</a></li><li class="pagination__item pagination__item--last"><a class="btn btn-sm btn btn-outline" href=/page/46/>46</a></li></ul></nav></div><clr-vertical-nav class="clr-vertical-nav has-nav-groups"><div class=nav-content><section class=sidenav-content><a class="nav-link active" href=/>Home</a>
<clr-vertical-nav-group class=nav-group><div class=nav-group-content><button type=button class=nav-group-trigger aria-expanded=false aria-label="Toggle vertical navigation group" onclick='toggleNavigation("categories")'><div class=nav-group-text>Categories</div><clr-icon shape=angle class=nav-group-trigger-icon id=icon-categories dir=down title=Collapse></clr-icon></button></div><div id=section-categories class=nav-group-children><clr-vertical-nav-group-children><a class=nav-link href=https://www.definit.co.uk/category/career/><span class=nav-text>career <span class="badge badge-1">26</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/cloud-native/><span class=nav-text>cloud-native <span class="badge badge-1">17</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/community/><span class=nav-text>community <span class="badge badge-1">44</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/microsoft/><span class=nav-text>microsoft <span class="badge badge-1">60</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/networking/><span class=nav-text>networking <span class="badge badge-1">29</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/nsx/><span class=nav-text>nsx <span class="badge badge-1">16</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/vcf/><span class=nav-text>vcf <span class="badge badge-1">2</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/vmware/><span class=nav-text>vmware <span class="badge badge-1">206</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/vmware-aria/><span class=nav-text>vmware-aria <span class="badge badge-1">1</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/vmware-multi-cloud/><span class=nav-text>vmware-multi-cloud <span class="badge badge-1">1</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/vrealize-automation/><span class=nav-text>vrealize-automation <span class="badge badge-1">40</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/vrealize-operations/><span class=nav-text>vrealize-operations <span class="badge badge-1">71</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/vrealize-orchestrator/><span class=nav-text>vrealize-orchestrator <span class="badge badge-1">23</span></span></a>
<a class=nav-link href=https://www.definit.co.uk/category/vsphere/><span class=nav-text>vsphere <span class="badge badge-1">56</span></span></a></clr-vertical-nav-group-children></div></clr-vertical-nav-group><div class=nav-divider></div><clr-vertical-nav-group class=nav-group><div class=nav-group-content><button type=button class=nav-group-trigger aria-expanded=false aria-label="Toggle vertical navigation group" onclick='toggleNavigation("tags")'><div class=nav-group-text>Tags (Top 10)</div><clr-icon shape=angle class=nav-group-trigger-icon id=icon-tags dir=down title=Collapse></clr-icon></button></div><div id=section-tags class=nav-group-children><clr-vertical-nav-group-children><a class=nav-link href=/tag/vrops>vrops <span class="badge badge-1">68</span></a>
<a class=nav-link href=/tag/vmware>vmware <span class="badge badge-1">57</span></a>
<a class=nav-link href=/tag/automation>automation <span class="badge badge-1">40</span></a>
<a class=nav-link href=/tag/windows>windows <span class="badge badge-1">38</span></a>
<a class=nav-link href=/tag/vmworld>vmworld <span class="badge badge-1">34</span></a>
<a class=nav-link href=/tag/esx-and-esxi>esx-and-esxi <span class="badge badge-1">33</span></a>
<a class=nav-link href=/tag/vcenter-server>vcenter-server <span class="badge badge-1">33</span></a>
<a class=nav-link href=/tag/nsx>nsx <span class="badge badge-1">32</span></a>
<a class=nav-link href=/tag/vra>vra <span class="badge badge-1">30</span></a>
<a class=nav-link href=/tag/webinar>webinar <span class="badge badge-1">29</span></a></clr-vertical-nav-group-children></div></clr-vertical-nav-group><div class=nav-divider></div></section></div></clr-vertical-nav><script lang=javascript>function toggleNavigation(e){var t=document.getElementById("section-"+e),n=document.getElementById("icon-"+e);t.style.display==="none"?(t.style.display="block",n.dir="down"):(t.style.display="none",n.dir="right")}</script></div><script async src="https://www.googletagmanager.com/gtag/js?id=UA-4368767-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-4368767-1")</script><script src=/js/lightbox-plus-jquery.min.js></script></clr-main-container></body></html>